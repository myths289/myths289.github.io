<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Webpack | 蜗牛浪迹天涯</title><noscript>开启JavaScript才能访问本站哦~</noscript><link rel="icon" href="https://bu.dusays.com/2023/11/08/654af68b25bb8.jpg"><!-- index.css--><link rel="stylesheet" href="/css/index.css"><!-- inject head--><link rel="stylesheet" href="https://cdn3.codesign.qq.com/icons/7pOrz0WXB5ZWJPX/latest/iconfont.css"><link rel="stylesheet" href="/lib/snackbar.min.css"><!-- comment--><!-- pace 胶囊加载条(Capsule loading bar)--><script src="https://cdn.bootcdn.net/ajax/libs/pace/1.2.4/pace.min.js"></script><!-- search--><script src="https://cdn.bootcdn.net/ajax/libs/lunr.js/2.3.9/lunr.min.js"></script><!-- aplayer--><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/aplayer/1.10.1/APlayer.min.css"><!-- swiper--><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/Swiper/9.2.4/swiper-bundle.min.css"><!-- echarts--><script src="https://cdn.bootcdn.net/ajax/libs/echarts/5.4.2/echarts.min.js"></script><!-- 灰色纪念日(Gray Anniversary)--><!-- Open Graph--><meta name="description" content="# Webpack Webpack初识认识Webpack 事实上随着前端的快速发展，目前前端的开发已经变的越来越复杂了： 比如开发过程中我们需要通过模块化的方式来开发； 比如也会使用一些高级的特性来加快我们的开发效率或者安全性，比如通过 ES6+、TypeScript 开发脚本逻辑，通过sas"><!-- pwa--><script>(win => {
        win.saveToLocal = {
            set: function setWithExpiry(key, value, ttl) {
                if (ttl === 0)
                    return
                const now = new Date()
                const expiryDay = ttl * 86400000
                const item = {
                    value: value,
                    expiry: now.getTime() + expiryDay,
                }
                localStorage.setItem(key, JSON.stringify(item))
            },

            get: function getWithExpiry(key) {
                const itemStr = localStorage.getItem(key)

                if (!itemStr) {
                    return undefined
                }
                const item = JSON.parse(itemStr)
                const now = new Date()

                if (now.getTime() > item.expiry) {
                    localStorage.removeItem(key)
                    return undefined
                }
                return item.value
            }
        }

        const DarkModeStatus = localStorage.getItem('theme')
        if (DarkModeStatus !== null) {
            if (DarkModeStatus === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark')
            } else {
                document.documentElement.setAttribute('data-theme', 'light')
            }
        }

        const asideStatus = saveToLocal.get('aside-status')
        if (asideStatus !== undefined) {
            if (asideStatus === 'hide') {
                document.documentElement.classList.add('hide-aside')
            } else {
                document.documentElement.classList.remove('hide-aside')
            }
        }
    }
)(window)

console.log(
    "%c🔥 程序：Hexo | 主题：Hexo-Theme-Solitude | 作者：王卓Sco、亦封 | Github: https://github.com/DuoSco/Hexo-theme-solitude | 版本：v1.3.0 😄",
    "color: #fff; background: linear-gradient(-25deg, #a8edea, #fed6e3); padding: 8px 15px; border-radius: 8px; text-shadow: 2px 2px 4px white; color: black;"
);
</script><div><script src="/js/utils.js"></script><script src="/js/main.js"></script></div><!-- custom inject--><script>console.log("head")</script><!-- global head--><script>const GLOBAL_CONFIG = {
    root: '/',
    algolia: undefined,
    localsearch: {"preload":true,"path":"/search.xml"},
    runtime: '2024-01-01 00:00:00',
    lazyload: {
        enable: true,
        error: '/img/error_load.png'
    },
    hightlight: {
        enable: true,
        limit: 200,
        expand: false,
        copy: true,
    },
    lightbox: true,
    randomlinks: false,
    lang: {
        theme: {
            dark: '已切换至深色模式',
            light: '已切换至浅色模式',
        },
        copy: {
            success: '复制成功',
            error: '复制失败',
        },
        backtop: '返回顶部',
        time: {
            recent: '最近',
            yesterday: '昨天',
            berforeyesterday: '前天',
            daybefore: '天前',
            runtime: '天',
        },
        sayhello: {
            morning: `一日之计在于晨`,
            noon: `吃饱了才有力气干活`,
            afternoon: `集中精力，攻克难关`,
            night: `不要太劳累了，早睡更健康`,
            goodnight: `睡个好觉，保证精力充沛`,
        },
        search: {
            empty: '找不到你查询的内容：${query}',
            hit: '找到 ${hits} 条结果，用时 ${time} 毫秒',
            placeholder: '输入关键词快速查找',
        }
    },
    covercolor: {
        enable: true
    },
    comment: {
        enable: false,
        type: 'twikoo',
        commentBarrage: false,
        randomInfoStart: ["聪敏的","可爱的","美丽的"],
        randomInfoEnd: ["白菜","小可爱","小仙女"],
        twikoo: {
            url: '',
            accessToken: ''
        },
        waline: {
            url: '',
        }
    },
    rightside: {
        enable: false
    },
    ai:{
        enable: false,
        key: '',
        talk: '我是王卓Sco开发的摘要生成助理ScoGPT，ScoGPT在静态部署时进行摘要的撰写，并且在访客访问时通过ScoCorrection转译后的文本摘要实现工具。我在这里只负责已经生成的摘要显示，你无法与我直接沟通，但我可以回答一些预设的问题。',
        randomPost: false,
    },
    music:{
        enable: true,
    }
}</script><meta name="generator" content="Hexo 6.3.0"></head><body id="body"><!-- loading--><div id="loading-box" onclick="preloader.endLoading();" style="zoom:1"><div class="loading-bg"><img class="loading-img" src= "/img/loading.gif" data-lazy-src="https://bu.dusays.com/2023/11/08/654af68b25bb8.jpg" alt="loading image"></div></div><script>const preloader = {
    endLoading: () => {
        document.getElementById('loading-box').classList.add('loaded');
    },
    initLoading: () => {
        document.getElementById('loading-box').classList.remove('loaded');
    },
    removePaceDone: () => {
        document.getElementById('body').classList = 'pace-done';
    }
}
window.addEventListener('load', () => {
    preloader.endLoading();
});
window.addEventListener('pjax:send', () => {
    preloader.initLoading();
});
document.addEventListener('pjax:complete', () => {
    preloader.endLoading();
});</script><!-- console--><div id="console"><div class="close-btn" onclick="sco.hideConsole()"><i class="scoicon sco-close-fill"></i></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments" onclick="sco.hideConsole()"><div class="card-content"><div class="author-content-item-tips">互动</div><div class="author-content-item-title">最新评论</div></div><div class="aside-list"></div></div></div><div class="console-card-group-right"><div class="console-card tags" onclick="sco.hideConsole()"><div class="card-content"><div class="author-content-item-tips">标签</div><div class="author-content-item-title">寻找感兴趣的领域</div></div><div class="card-tag-cloud"></div></div><div class="console-card history" onclick="sco.hideConsole()"><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" onclick="pjax.loadUrl('/archives/2024/')" href="javascript:void(0);"><span class="card-archive-list-date">2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">61</span><span class="card-archive-list-count-unit">篇</span></div></a></li></ul></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" onclick="sco.switchDarkMode()" title="昼夜切换" href="javascript:void(0);"><i class="scoicon sco-moon-clear-fill"></i></a></div><div class="console-btn-item" id="consoleHideAside"><a class="asideSwitch" onclick="sco.switchHideAside()" title="边栏显示控制" href="javascript:void(0);"><i class="scoicon sco-side-bar-fill"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="sco.musicToggle()"><a class="music-switch" title="音乐开关" href="javascript:void(0);"><i class="scoicon sco-disc-fill"></i></a></div></div><div class="console-mask" onclick="sco.hideConsole()"></div></div><!-- sidebar--><div id="sidebar" style="zoom: 1;"><div id="menu-mask" style="display: none;"></div><div id="sidebar-menus"><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" onclick="sco.switchDarkMode()" href="javascript:void(0);"><i class="scoicon sco-moon-clear-fill"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/DuoSco/Hexo-Theme-solitude" title="Solitude"><img class="back-menu-item-icon" src="https://bu.dusays.com/2023/11/08/654af68b25bb8.jpg" alt="项目"><span class="back-menu-item-text">Solitude</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>文库</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="scoicon sco-folder-fill"></i><span>文章列表</span></a></li><li><a class="site-page child" href="/categories/"><i class="scoicon sco-checkbox-multiple-blank-fill"></i><span>全部分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="scoicon sco-price-tag-fill"></i><span>全部标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>友链</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/moments/"><i class="scoicon sco-wifi-fill"></i><span>鱼塘</span></a></li><li><a class="site-page child" href="/links/"><i class="scoicon sco-group-fill"></i><span>友情链接</span></a></li><li><a class="site-page child" href="javascript:travelling()"><i class="scoicon sco-gift-fill"></i><span>宝藏博主</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/equipment/"><i class="scoicon sco-laptop-line"></i><span>装备</span></a></li><li><a class="site-page child" href="/tlink/"><i class="scoicon sco-tools-fill"></i><span>工具箱</span></a></li><li><a class="site-page child" href="/music/"><i class="scoicon sco-laptop-line"></i><span>音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="scoicon sco-contacts-fill"></i><span>关于本站</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-widget card-tags card-archives card-webinfo card-allinfo"><div class="card-tag-cloud"></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav class="show" id="nav"><div id="nav-group"><div id="blog_name"><div class="back-home-button" tabindex="-1"><i class="back-home-button-icon scoicon sco-more-fill"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/DuoSco/Hexo-Theme-solitude" title="Solitude"><img class="back-menu-item-icon" src="https://bu.dusays.com/2023/11/08/654af68b25bb8.jpg" alt="项目"><span class="back-menu-item-text">Solitude</span></a></div></div></div></div><a id="site-name" href="/" title="返回博客主页" target="_self"><span class="scoicon">首页</span></a></div><div id="page-name-mask"><div id="page-name"><a id="page-name-text" onclick="sco.toTop()">Webpack</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>文库</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="scoicon sco-folder-fill"></i><span>文章列表</span></a></li><li><a class="site-page child" href="/categories/"><i class="scoicon sco-checkbox-multiple-blank-fill"></i><span>全部分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="scoicon sco-price-tag-fill"></i><span>全部标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>友链</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/moments/"><i class="scoicon sco-wifi-fill"></i><span>鱼塘</span></a></li><li><a class="site-page child" href="/links/"><i class="scoicon sco-group-fill"></i><span>友情链接</span></a></li><li><a class="site-page child" href="javascript:travelling()"><i class="scoicon sco-gift-fill"></i><span>宝藏博主</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/equipment/"><i class="scoicon sco-laptop-line"></i><span>装备</span></a></li><li><a class="site-page child" href="/tlink/"><i class="scoicon sco-tools-fill"></i><span>工具箱</span></a></li><li><a class="site-page child" href="/music/"><i class="scoicon sco-laptop-line"></i><span>音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="scoicon sco-contacts-fill"></i><span>关于本站</span></a></li></ul></div></div></div><div id="nav-left"></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button"><a class="site-page" href="https://www.travellings.cn/go.html" title="开往-友链接力" target="_blank"><i class="scoicon sco-train-line"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机一篇文章" href="javascript:void(0);"><i class="scoicon sco-signal-tower-fill"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索"><i class="scoicon sco-search-line"></i></a></div><div class="nav-button" id="nav-console"><a class="console_switchbutton" onclick="sco.showConsole()" title="中控台" href="javascript:void(0);"><i class="scoicon sco-dashboard-fill"></i></a></div><div class="nav-button" id="nav-totop" onclick="sco.toTop()"><a class="totopbtn"><i class="scoicon sco-arrow-up-line"></i><span id="percent">0</span></a></div><div id="toggle-menu"><a class="site-page"><i class="scoicon sco-menu-line"></i></a></div></div></div></nav><div class="coverdiv" id="coverdiv"><img class="nolazyload" id="post-cover" src="https://tse3-mm.cn.bing.net/th/id/OIP-C.Qb6YcFvpvLuZXJ44H6Nb3gAAAA?w=280&amp;h=187&amp;c=7&amp;r=0&amp;o=5&amp;pid=1.7" alt="Webpack"></div><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original" title="该文章为原创文章，注意版权协议">原创</a><span class="post-meta-categories"><a class="post-meta-categories" href="/categories/Web前端开发/">Web前端开发</a></span><div class="tag_share"><div class="post-meta__tag-list"></div></div></div></div><h1 class="post-title">Webpack</h1><div id="post-meta"><div class="meta-secondline"><span class="post-meta-date" title="meta_posted 2024-01-24 11:11:00"><i class="post-meta-icon scoicon sco-calendar-todo-fill"></i><time datetime="2024-01-24T03:11:00.000Z">2024-01-24T03:11:00.000Z</time></span><span class="post-meta-date" title="meta_updated 2024-01-28 14:20:32"><i class="post-meta-icon scoicon sco-refresh-line"></i><time datetime="2024-01-28T06:20:32.341Z">2024-01-28T06:20:32.341Z</time></span><span class="post-meta-wordcount"><i class="post-meta-icon scoicon sco-word-fill" title="文章字数"></i><span class="word-count">15.6k</span><span class="post-meta-separator"></span><i class="post-meta-icon scoicon sco-clock-fill" title="阅读耗时"></i><span>64 min</span></span><span class="post-meta-position" title="作者IP归属地为衡阳"><i class="post-meta-icon scoicon sco-map-pin-fill"></i><span>衡阳</span></span><a class="post-meta-pv" href="/2024/01/24/Web%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/402_Webpack/40201_Webpack/" title="文章热度"><i class="post-meta-icon scoicon sco-fire-fill"></i><span id="busuanzi_value_page_pv"><i class="scoicon sco-loading-line"></i></span></a></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><meta name="referrer" content="no-referrer" />
# Webpack

<h2 id="Webpack初识"><a href="#Webpack初识" class="headerlink" title="Webpack初识"></a>Webpack初识</h2><h3 id="认识Webpack"><a href="#认识Webpack" class="headerlink" title="认识Webpack"></a>认识Webpack</h3><ul>
<li><p>事实上随着前端的快速发展，目前前端的开发已经变的越来越复杂了：</p>
<ul>
<li>比如开发过程中我们需要通过模块化的方式来开发；</li>
<li>比如也会使用一些高级的特性来加快我们的开发效率或者安全性，比如通过 ES6+、TypeScript 开发脚本逻辑，通过sass、less 等方式来编写 css 样式代码；</li>
<li>比如开发过程中，我们还希望实时的监听文件的变化来并且反映到浏览器上，提高开发的效率；</li>
<li>比如开发完成后我们还需要将代码进行压缩、合并以及其他相关的优化；</li>
<li>等等….</li>
</ul>
</li>
<li><p>但是对于很多的前端开发者来说，并不需要思考这些问题，日常的开发中根本就没有面临这些问题：</p>
<ul>
<li>这是因为目前前端开发我们通常都会直接使用三大框架来开发：Vue、React、Angular；</li>
<li>但是事实上，这三大框架的创建过程我们都是借助于脚手架（CLI）的；</li>
<li>事实上 Vue-CLI、create-react-app、Angular-CLI 都是基于 webpack 来帮助我们支持模块化、less、 TypeScript、打包优化等的；</li>
</ul>
</li>
</ul>
<h3 id="常见框架的脚手架"><a href="#常见框架的脚手架" class="headerlink" title="常见框架的脚手架"></a>常见框架的脚手架</h3><ul>
<li>事实上我们上面提到的所有脚手架都是依赖于 webpack 的：</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://s1.vika.cn/space/2024/01/28/06784435298744868b3cfcba3ae43110" alt="1663588762851"></p>
<h3 id="Webpack的作用"><a href="#Webpack的作用" class="headerlink" title="Webpack的作用"></a>Webpack的作用</h3><ul>
<li>官方的解释：webpack is a static module bundler for modern JavaScript applications.<ul>
<li><strong>webpack 是一个静态的模块化打包工具，为现代的 JavaScript 应用程序；</strong></li>
</ul>
</li>
<li>我们来对上面的解释进行拆解：<ul>
<li>打包 bundler：webpack 可以将帮助我们进行打包，所以它是一个打包工具</li>
<li>静态的 static：这样表述的原因是我们最终可以将代码打包成最终的静态资源（部署到静态服务器）；</li>
<li>模块化 module：webpack 默认支持各种模块化开发，ES Module、CommonJS、AMD等；</li>
<li>现代的 modern：我们前端说过，正是因为现代前端开发面临各种各样的问题，才催生了 webpack 的出现和发展；</li>
</ul>
</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://s1.vika.cn/space/2024/01/28/a29c4e4c21ce4026af54c9f8871069c6" alt="1663588868726"></p>
<h3 id="Vue项目的打包内容"><a href="#Vue项目的打包内容" class="headerlink" title="Vue项目的打包内容"></a>Vue项目的打包内容</h3><ul>
<li><p>JavaScript 的打包：</p>
<ul>
<li><p>将 ES6 转换成 ES5 的语法；</p>
</li>
<li><p>TypeScript 的处理，将其转换成 JavaScript；</p>
</li>
</ul>
</li>
<li><p>CSS 的处理：</p>
<ul>
<li>CSS文件模块的加载、提取；</li>
<li>Less、Sass等预处理器的处理；</li>
</ul>
</li>
<li><p>资源文件 img、font：</p>
<ul>
<li>图片 img 文件的加载；</li>
<li>字体 font 文件的加载；</li>
</ul>
</li>
<li><p>HTML 资源的处理：</p>
<ul>
<li>打包 HTML 资源文件；</li>
</ul>
</li>
<li><p>处理 vue 项目的 SFC 文件 .vue 文件；</p>
</li>
</ul>
<h3 id="webpack的使用前提"><a href="#webpack的使用前提" class="headerlink" title="webpack的使用前提"></a>webpack的使用前提</h3><ul>
<li><p><strong>webpack 的官方文档是 : <a target="_blank" rel="noopener" href="https://webpack.js.org/">https://webpack.js.org/</a></strong></p>
</li>
<li><p><strong>webpack 的中文官方文档是<a target="_blank" rel="noopener" href="https://webpack.docschina.org/">https://webpack.docschina.org/</a></strong></p>
<ul>
<li>DOCUMENTATION：文档详情，也是我们最关注的</li>
</ul>
</li>
<li><p>Webpack 的运行是依赖 Node 环境的，所以我们电脑上必须有 Node 环境</p>
<ul>
<li>所以我们需要先安装 Node.js，安装 node 的同时也会安装 npm；<ul>
<li>查看 node 是否安装成功以及查看 node 版本,终端中输入指令 : <strong>node –version</strong> , 出现 node 版本即为安装成功</li>
<li>查看 npm 版本 : <strong>npm –version</strong></li>
</ul>
</li>
<li>我当前电脑上的 node 版本是 v14.15.5，npm 版本是 6.14.11（你也可以使用 nvm 来管理Node版本）；</li>
</ul>
</li>
<li><p><strong>Node官方网站：<a target="_blank" rel="noopener" href="https://nodejs.org/">https://nodejs.org/</a></strong></p>
</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://s1.vika.cn/space/2024/01/28/4bff0e804d3f43269eeb3e85d2f7f35d" alt="1663589375701"></p>
<h3 id="webpack的安装"><a href="#webpack的安装" class="headerlink" title="webpack的安装"></a>webpack的安装</h3><ul>
<li>webpack 的安装目前分为两个：<strong>webpack、webpack-cli</strong></li>
<li>那么它们是什么关系呢？<ul>
<li>执行 webpack 命令，会执行 node_modules 下的 .bin 目录下的 webpack；</li>
<li>webpack 在执行时是依赖 webpack-cli 的，如果没有安装就会报错；</li>
<li>而 webpack-cli 中代码执行时，才是真正利用 webpack 进行编译和打包的过程；</li>
<li>所以在安装 webpack 时，我们需要同时安装 webpack-cli<ul>
<li>第三方的脚手架事实上是没有使用 webpack-cli 的，而是类似于自己的 vue-service-cli 的东西</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://s1.vika.cn/space/2024/01/28/08bc2a09bbc84c81aa2579106d93dc6c" alt="1663589730730"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack webpack-cli –g <span class="comment"># 全局安装</span></span><br><span class="line"></span><br><span class="line">npm install webpack webpack-cli –D <span class="comment"># 局部安装</span></span><br></pre></td></tr></table></figure>

<h2 id="Webpack的默认打包"><a href="#Webpack的默认打包" class="headerlink" title="Webpack的默认打包"></a>Webpack的默认打包</h2><h3 id="Webpack的默认打包-1"><a href="#Webpack的默认打包-1" class="headerlink" title="Webpack的默认打包"></a>Webpack的默认打包</h3><p><strong>.&#x2F;src&#x2F;js&#x2F;math.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES Module</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>.&#x2F;src&#x2F;js&#x2F;format.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CommomJS</span></span><br><span class="line"><span class="keyword">const</span> priceFormat = <span class="keyword">function</span> (<span class="params"></span>) &#123; </span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;¥99.88&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  priceFormat</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>.&#x2F;src&#x2F;index.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">&#x27;./js/math&#x27;</span></span><br><span class="line"><span class="keyword">const</span> &#123; priceFormat &#125; = <span class="built_in">require</span>(<span class="string">&#x27;./js/format&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">20</span>, <span class="number">30</span>))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">priceFormat</span>())</span><br></pre></td></tr></table></figure>

<ul>
<li>01 我们可以通过 webpack 进行打包，之后运行打包之后的代码<ul>
<li>在目录下直接执行命令: <strong>webpack</strong> ,就会执行默认打包,使用的是全局的 webpack</li>
</ul>
</li>
<li>02 执行上面的命令后,生成一个 dist 文件夹，里面存放一个 main.js 的文件，就是我们打包之后的文件：<ul>
<li>这个文件中的代码被压缩和丑化了；</li>
<li>在项目中使用 <strong>.&#x2F;index.html</strong> 文件,在 body 结束标签之前,引入该 main.js 即可在浏览器中执行</li>
<li>另外我们发现代码中依然存在 ES6 的语法，比如箭头函数、const 、let 等，这是因为默认情况下 webpack 并不清楚我们打包后的文件是否需要转成 ES5 之前的语法，后续我们需要通过 babel 来进行转换和设置；</li>
</ul>
</li>
<li>03 我们发现是可以正常进行打包的，但是有一个问题，webpack 是如何确定我们的入口的呢？<ul>
<li>事实上，当我们运行 webpack 命令时，webpack 会查找当前目录下的 <strong>.&#x2F;src&#x2F;index.js</strong> 作为入口；</li>
<li>所以，如果当前项目中没有存在 <strong>.&#x2F;src&#x2F;index.js</strong> 文件，那么会报错；</li>
</ul>
</li>
<li>当然，我们也可以通过配置来指定入口和出口<ul>
<li>指定入口文件为 <strong>.&#x2F;src&#x2F;main.js</strong> , 打包输入目录为 <strong>.&#x2F;build</strong></li>
</ul>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack --entry ./src/main.js --output-path ./build  </span><br></pre></td></tr></table></figure>

<h3 id="创建局部Webpack"><a href="#创建局部Webpack" class="headerlink" title="创建局部Webpack"></a>创建局部Webpack</h3><ul>
<li>前面我们直接执行webpack命令使用的是全局的webpack，如果希望使用局部的可以按照下面的步骤来操作。</li>
<li>第一步：执行命令 <strong>npm init</strong> 或者 <strong>npm init -y</strong> 创建 package.json 文件，用于管理项目的信息、库依赖等</li>
<li>第二步：安装局部的 webpack</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack webpack-cli -D</span><br></pre></td></tr></table></figure>

<ul>
<li>第三步：使用局部的 webpack 执行打包, 命令 : <strong>npx webpack</strong>  , npx 命令是有 npm 提供的,无需另外安装</li>
<li>第四步：在 package.json 中创建以下 scripts 脚本，执行脚本命令 <strong>npm run build</strong> 打包即可</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;build&quot;</span>:<span class="string">&quot;webpack&quot;</span>, <span class="comment">// 新增</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="Webpack的配置文件"><a href="#Webpack的配置文件" class="headerlink" title="Webpack的配置文件"></a>Webpack的配置文件</h3><ul>
<li>在通常情况下，webpack 需要打包的项目是非常复杂的，并且我们需要一系列的配置来满足要求，默认配置必然是不可以的。</li>
<li>我们可以在根目录下创建一个 <strong>webpack.config.js</strong> 文件，来作为 webpack 的配置文件：<ul>
<li>配置文件的文件名规定默认就是叫 webpack.config.js , 如果配置文件是其他名称, 需要另外配置命令专门指定</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>) <span class="comment">// 导入node的内置path模块</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 打包入口文件</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/main.js&#x27;</span>, </span><br><span class="line">  <span class="comment">// 打包出口</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./build&#x27;</span>), <span class="comment">// 出口目录</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span>, <span class="comment">// 出口文件名</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>继续执行 <strong>npm run build</strong> 命令，依然可以正常打包</li>
</ul>
<h3 id="指定配置文件"><a href="#指定配置文件" class="headerlink" title="指定配置文件"></a>指定配置文件</h3><ul>
<li>但是如果我们的配置文件并不是 webpack.config.js 的名字，而是其他的名字呢？<ul>
<li>比如我们将 <code>webpack.config.js</code> 修改成了 <code>wk.config.js</code>；</li>
<li>这个时候我们可以通过 <code>--config</code> 来指定对应的配置文件；<ul>
<li>在执行打包的同时指定配置文件, 命令 : <strong>webpack –config wk.config.js</strong></li>
</ul>
</li>
</ul>
</li>
<li>但是每次这样执行命令来对源码进行编译，会非常繁琐，所以我们可以在 package.json 文件中增加一个新的脚本：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;build&quot;</span>:<span class="string">&quot;webpack --config wk.config.js&quot;</span>,<span class="comment">// 新增</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li>之后我们执行 <strong>npm run build</strong> 来打包即可。</li>
</ul>
<h3 id="Webpack的依赖图"><a href="#Webpack的依赖图" class="headerlink" title="Webpack的依赖图"></a>Webpack的依赖图</h3><ul>
<li>webpack 到底是如何对我们的项目进行打包的呢？<ul>
<li>01 事实上 webpack 在处理应用程序时，它会<strong>根据命令或者配置文件找到入口文件</strong>；</li>
<li>02 <strong>从入口开始，会生成一个依赖关系图，这个依赖关系图会包含应用程序中所需的所有模块</strong>（比如 .js 文件、css 文件、图片、字体等）；</li>
<li>03 <strong>然后遍历图结构，打包一个个模块</strong>（根据文件的不同使用不同的 loader 来解析）；</li>
</ul>
</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://s1.vika.cn/space/2024/01/28/431350f79a024e00a1db41e6b6e1a079" alt="1663591539500"></p>
<h3 id="webpack打包案例"><a href="#webpack打包案例" class="headerlink" title="webpack打包案例"></a>webpack打包案例</h3><ul>
<li>我们创建一个 element.js<ul>
<li>通过 JavaScript 创建了一个元素，并且希望给它设置一些样式；</li>
</ul>
</li>
</ul>
<p><strong>.&#x2F;src&#x2F;js&#x2F;element.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;../css/style.css&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> divEl = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">divEl.<span class="property">className</span> = <span class="string">&#x27;title&#x27;</span></span><br><span class="line">divEl.<span class="property">innerHtml</span> = <span class="string">&#x27;你好,李银河&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(divEl)</span><br></pre></td></tr></table></figure>

<p><strong>.&#x2F;src&#x2F;css&#x2F;style.css</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>.&#x2F;src&#x2F;index.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;./js/element&quot;</span></span><br></pre></td></tr></table></figure>

<p>执行打包命令: <strong>npm run build</strong> , 此时会报错模块解析失败,需要 loader 解析模块, 解决方法见 CSS-loader 章节</p>
<p><img src= "/img/loading.gif" data-lazy-src="/images/1663643517400.png" alt="1663643517400"></p>
<h2 id="CSS与Less的打包"><a href="#CSS与Less的打包" class="headerlink" title="CSS与Less的打包"></a>CSS与Less的打包</h2><h3 id="CSS-loader"><a href="#CSS-loader" class="headerlink" title="CSS-loader"></a>CSS-loader</h3><h4 id="安装css-loader"><a href="#安装css-loader" class="headerlink" title="安装css-loader"></a>安装css-loader</h4><ul>
<li>上面的错误信息告诉我们需要一个 loader 来加载这个 css 文件，但是 loader 是什么呢？<ul>
<li>loader 可以用于对模块的源代码进行转换；</li>
<li>我们可以将 css 文件也看成是一个模块，我们是通过 import 来加载这个模块的；</li>
<li>在加载这个模块时，webpack 其实并不知道如何对其进行加载，我们必须制定对应的 loader 来完成这个功能；</li>
</ul>
</li>
<li>那么我们需要一个什么样的 loader 呢？<ul>
<li>对于加载 css 文件来说，我们需要一个可以读取 css 文件的 loader；</li>
<li>这个 loader 最常用的是 css-loader；</li>
</ul>
</li>
<li>css-loader 的安装：<strong>npm install css-loader -D</strong></li>
</ul>
<h4 id="配置css-loader"><a href="#配置css-loader" class="headerlink" title="配置css-loader"></a>配置css-loader</h4><ul>
<li><p>如何使用这个 loader 来加载 css 文件呢？有三种方式：</p>
<ul>
<li>内联方式, (不方便管理,不推荐使用)；</li>
<li>CLI方式（ webpack5 中不再使用）；</li>
<li>配置方式 (推荐使用)；</li>
</ul>
</li>
<li><p>01 内联方式：内联方式使用较少，因为不方便管理；</p>
<ul>
<li>在引入的样式前加上使用的 loader，并且使用 <code>!</code> 分割；</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;css-loader!../css/style.css&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>02 CLI 方式</p>
<ul>
<li>在 webpack5 的文档中已经没有了<code> --module-bind</code>；</li>
<li>实际应用中也比较少使用，因为不方便管理；</li>
</ul>
</li>
<li><p>03 配置方式</p>
<ul>
<li>表示的意思是在我们的 <code>webpack.config.js </code>文件中写明配置信息：<ul>
<li>module.rules 中允许我们配置多个 loader（因为我们也会继续使用其他的 loader，来完成其他文件的加载）；</li>
<li>这种方式可以更好的表示 loader 的配置，也方便后期的维护，同时也让你对各个 Loader 有一个全局的概览；</li>
</ul>
</li>
<li>module.rules 的配置如下：<ul>
<li>rules属性对应的值是一个数组：[Rule]</li>
<li>数组中存放的是一个个的Rule，Rule是一个对象，对象中可以设置多个属性：<ul>
<li>test 属性：用于对 resource（资源）进行匹配的，通常会设置成正则表达式；</li>
<li>use 属性：对应的值时一个数组：[UseEntry]<ul>
<li>UseEntry 是一个对象，可以通过对象的属性来设置一些其他属性<ul>
<li>loader：必须有一个 loader属性，对应的值是一个字符串；</li>
<li>options：可选的属性，值是一个字符串或者对象，值会被传入到loader中；</li>
<li>query：目前已经使用 options 来替代；</li>
</ul>
</li>
<li>传递字符串（如：use: [ ‘style-loader’ ]）是 loader 属性的简写方式（如：use: [ { loader: ‘style-loader’} ]）；</li>
</ul>
</li>
</ul>
</li>
<li>loader属性： Rule.use: [ { loader } ] 的简写。</li>
</ul>
</li>
<li><strong>webpack.config.js</strong> :</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>) <span class="comment">// 导入node的内置path模块</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 打包入口</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">  <span class="comment">// 打包出口</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./build&#x27;</span>), <span class="comment">// 出口目录</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span>, <span class="comment">// 出口文件名</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 模块</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">//匹配处理 .CSS 文件</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// loader: &#x27;css-loader&#x27;, // 简写,写法一</span></span><br><span class="line">        <span class="comment">// use: [&quot;css-loader&quot;], // 写法二</span></span><br><span class="line">        <span class="comment">// 写法三: 完整写法</span></span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>配置好 CSS-loader 后,即可执行 <strong>npm run build</strong> 打包 .css 文件,但是此时 CSS 样式依然还是未生效,解决方法参考 style-loader 章节</li>
</ul>
<h3 id="style-loader"><a href="#style-loader" class="headerlink" title="style-loader"></a>style-loader</h3><h4 id="安装style-loader"><a href="#安装style-loader" class="headerlink" title="安装style-loader"></a>安装style-loader</h4><ul>
<li>我们已经可以通过 css-loader 来加载 css 文件了<ul>
<li>但是你会发现这个 css 在我们的代码中并没有生效（页面没有效果）。</li>
</ul>
</li>
<li>这是为什么呢？<ul>
<li>因为 css-loader 只是负责将 .css 文件进行解析，并不会将解析之后的 css 插入到页面中；</li>
<li>如果我们希望再完成插入 style 的操作，那么我们还需要另外一个 loader，就是 style-loader；</li>
</ul>
</li>
<li>安装 style-loader：<strong>npm install style-loader -D</strong></li>
</ul>
<h4 id="配置style-loader"><a href="#配置style-loader" class="headerlink" title="配置style-loader"></a>配置style-loader</h4><ul>
<li>那么我们应该如何使用 style-loader：<ul>
<li>在配置文件中，添加 style-loader；</li>
<li>注意：因为 loader 的执行顺序是从右向左（或者说从下到上，或者说从后到前的），所以我们需要将 style-loader写到 css-loader 的前面；</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>) <span class="comment">// 导入node的内置path模块</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 打包入口</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">  <span class="comment">// 打包出口</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./build&#x27;</span>), <span class="comment">// 出口目录</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span>, <span class="comment">// 出口文件名</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 模块</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">//匹配处理 .CSS 文件</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>], <span class="comment">// 只需要在 css-loader 的前面添加 style-loader 即可</span></span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>重新执行编译 <strong>npm run build</strong>，可以发现打包后的 css 已经生效了：<ul>
<li>当前我们的 css 是通过页内样式的方式添加进来的；</li>
<li>后续我们也会讲如何将 css 抽取到单独的文件中，并且进行压缩等操作；</li>
</ul>
</li>
</ul>
<h3 id="less-loader"><a href="#less-loader" class="headerlink" title="less-loader"></a>less-loader</h3><h4 id="处理less工具"><a href="#处理less工具" class="headerlink" title="处理less工具"></a>处理less工具</h4><ul>
<li>在我们开发中，我们可能会使用less、sass、stylus的预处理器来编写css样式，效率会更高。</li>
<li>那么，如何可以让我们的环境支持这些预处理器呢？<ul>
<li>首先我们需要确定，less、sass 等编写的 css 需要通过工具转换成普通的 css；</li>
</ul>
</li>
<li>比如我们编写如下的 less 样式：</li>
</ul>
<p><strong>.&#x2F;src&#x2F;css&#x2F;title.less</strong></p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@bgColor:</span> pink;</span><br><span class="line"><span class="variable">@textDecoration:</span> underline;</span><br><span class="line"><span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="variable">@bgColor</span>;</span><br><span class="line">  <span class="attribute">text-decoration</span>: <span class="variable">@textDecoration</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>.&#x2F;src&#x2F;js&#x2F;element.js</strong> , 将 less 文件添加到依赖关系图</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;../css/style.css&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;../css/title.less&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> divEl = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line"></span><br><span class="line">divEl.<span class="property">className</span> = <span class="string">&#x27;title&#x27;</span></span><br><span class="line">divEl.<span class="property">innerHTML</span> = <span class="string">&#x27;你好,李银河&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(divEl)</span><br></pre></td></tr></table></figure>

<ul>
<li>我们可以使用 less 工具来完成它的编译转换：<ul>
<li>less 工具是一个独立的工具,跟 webpack 没有关系 , lessc 是安装 less 后,由 less 提供的</li>
<li>安装 less : <strong>npm install less -D</strong></li>
<li>执行命令: <strong>npx lessc .&#x2F;src&#x2F;css&#x2F;title.less title.css</strong> , 将 title.less 编译成 title.css</li>
</ul>
</li>
</ul>
<h4 id="使用less-loader"><a href="#使用less-loader" class="headerlink" title="使用less-loader"></a>使用less-loader</h4><ul>
<li><p>但是在项目中我们会编写大量的 css，它们如何可以自动转换呢？</p>
<ul>
<li>这个时候我们就可以使用 less-loader，来自动使用 less 工具转换 less 到 css；</li>
<li>less-loader 的原理很简单，就是调用 less 库提供的方法，转译 less 语法后输出</li>
</ul>
</li>
<li><p>01 安装 less-loader : <strong>npm install less less-loader -D</strong> </p>
<ul>
<li>使用 less-loader,也需要安装 less</li>
</ul>
</li>
<li><p>02 在 <strong>webpack.config.js</strong> 中配置 less-loader:</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>) <span class="comment">// 导入node的内置path模块</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 打包入口</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">  <span class="comment">// 打包出口</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./build&#x27;</span>), <span class="comment">// 出口目录</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span>, <span class="comment">// 出口文件名</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 模块</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">//匹配处理 .CSS 文件</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//匹配处理 .less 文件</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;less-loader&#x27;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>03 执行 <strong>npm run build</strong> 执行打包, less 就可以自动转换成 css，并且页面也会生效了</li>
</ul>
<h3 id="postcss-loader"><a href="#postcss-loader" class="headerlink" title="postcss-loader"></a>postcss-loader</h3><h4 id="认识postCSS工具"><a href="#认识postCSS工具" class="headerlink" title="认识postCSS工具"></a>认识postCSS工具</h4><ul>
<li>什么是 PostCSS 呢？<ul>
<li>PostCSS 是一个通过 JavaScript 来转换样式的工具；</li>
<li>这个工具可以帮助我们进行一些 CSS 的转换和适配，比如自动添加浏览器前缀、css 样式的重置；</li>
<li>但是实现这些功能，我们需要借助于 PostCSS 对应的插件；</li>
</ul>
</li>
<li>如何使用 PostCSS 呢？主要就是两个步骤：<ul>
<li>第一步：查找 PostCSS 在构建工具中的扩展，比如 webpack 中的 postcss-loader；</li>
<li>第二步：选择可以添加你需要的 PostCSS 相关的插件；</li>
</ul>
</li>
</ul>
<h4 id="使用postCSS"><a href="#使用postCSS" class="headerlink" title="使用postCSS"></a>使用postCSS</h4><ul>
<li><p>当然，我们能不能也直接在终端使用 PostCSS 呢？</p>
<ul>
<li>也是可以的，但是我们需要单独安装一个工具 postcss-cli；</li>
</ul>
</li>
<li><p>我们可以安装一下它们：postcss、postcss-cli </p>
<ul>
<li>命令 : <strong>npm install postcss postcss-cli -D</strong></li>
</ul>
</li>
<li><p>我们编写一个需要添加前缀的 css：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://autoprefixer.github.io/">https://autoprefixer.github.io/</a></li>
<li>我们可以在上面的网站中查询一些添加 css 属性的样式,并将该 css 文件添加到关系依赖图(即在某个文件中导入)</li>
</ul>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.title</span> &#123;</span><br><span class="line">  user-select: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="插件autoprefixer"><a href="#插件autoprefixer" class="headerlink" title="插件autoprefixer"></a>插件autoprefixer</h4><ul>
<li><p>因为我们需要<strong>自动添加前缀</strong>，所以要安装 autoprefixer：<strong>npm install autoprefixer -D</strong></p>
</li>
<li><p>直接使用使用 postcss 工具，并且制定使用 autoprefixer : </p>
<ul>
<li><strong>npx postcss –use autoprefixer -o .&#x2F;src&#x2F;css&#x2F;end.css .&#x2F;src&#x2F;css&#x2F;style.css</strong></li>
<li>通过 postcss ,使用 autoprefixer 插件,给 <strong>.&#x2F;src&#x2F;css&#x2F;style.css</strong> 添加前缀,输出到 <strong>.&#x2F;src&#x2F;css&#x2F;end.css</strong></li>
<li>处理结果如下:</li>
</ul>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.title</span> &#123;</span><br><span class="line">  -webkit-user-select: none;</span><br><span class="line">     -moz-user-select: none;</span><br><span class="line">          user-select: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UseUJBQWlCO0tBQWpCLHNCQUFpQjtVQUFqQixpQkFBaUI7QUFDbkIiLCJmaWxlIjoiZW5kLmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi50aXRsZSB7XHJcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbn1cclxuIl19 */</span></span><br></pre></td></tr></table></figure>

<h4 id="postcss-loader-1"><a href="#postcss-loader-1" class="headerlink" title="postcss-loader"></a>postcss-loader</h4><ul>
<li><p>真实开发中我们必然不会直接使用命令行工具来对 css 进行处理，而是可以借助于构建工具：</p>
<ul>
<li>在 webpack 中使用 postcss 就是使用 postcss-loader 来处理的；</li>
</ul>
</li>
<li><p>我们来安装 postcss-loader：<strong>npm install postcss-loader -D</strong></p>
</li>
<li><p>我们修改加载 css 的 loader：（配置文件已经过多，给出一部分了）</p>
<ul>
<li>注意：因为 postcss 需要有对应的插件才会起效果，所以我们需要配置它的 plugin；</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>) <span class="comment">// 导入node的内置path模块</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 打包入口</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">  <span class="comment">// 打包出口</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./build&#x27;</span>), <span class="comment">// 出口目录</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span>, <span class="comment">// 出口文件名</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 模块</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">//匹配处理 .CSS 文件</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">          &#123; <span class="comment">// 若将插件抽离出去成独立文件,则此处只需要像 css-loader 这样的格式添加 postcss-loader 即可</span></span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&#x27;postcss-loader&#x27;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">                <span class="attr">plugins</span>: [<span class="built_in">require</span>(<span class="string">&#x27;autoprefixer&#x27;</span>)],</span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//匹配处理 .less 文件</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;less-loader&#x27;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="单独的postcss配置"><a href="#单独的postcss配置" class="headerlink" title="单独的postcss配置"></a>单独的postcss配置</h4><ul>
<li>当然，我们也可以将这些配置信息放到一个单独的文件中进行管理：<ul>
<li>在根目录下创建 <strong>postcss.config.js</strong> <ul>
<li>打包时会先去 webpack.config.js 中查看配置,有就使用,没有再去 postcss.config.js 中查看配置</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>postcss.config.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="built_in">require</span>(<span class="string">&#x27;autoprefixer&#x27;</span>)],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="postcss-preset-env"><a href="#postcss-preset-env" class="headerlink" title="postcss-preset-env"></a>postcss-preset-env</h4><ul>
<li>事实上，在配置 postcss-loader 时，我们配置插件并不需要使用 autoprefixer。</li>
<li>我们可以使用另外一个插件：postcss-preset-env<ul>
<li>postcss-preset-env 也是一个 postcss 的插件；</li>
<li><strong>它可以帮助我们将一些现代的 CSS 特性，转成大多数浏览器认识的 CSS，并且会根据目标浏览器或者运行时环境添加所需的 polyfill；</strong></li>
<li>也包括会自动帮助我们添加 autoprefixer（所以相当于已经内置了 autoprefixer ）；</li>
</ul>
</li>
<li>首先，我们需要安装 postcss-preset-env：<strong>npm install postcss-preset-env -D</strong></li>
<li>之后，我们直接修改掉之前 <strong>postcss.config.js</strong> 文件中的 autoprefixer 即可：<ul>
<li>注意：我们在使用某些 postcss 插件时，也可以直接传入字符串</li>
<li>该插件也可以将十六进制的颜色值,转换为 rgb 值,测试时数值只能是 6 位或者 8 位 , 其他位数编辑器会报错,浏览器报警告属性值无效</li>
</ul>
</li>
</ul>
<p><strong>postcss.config.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="built_in">require</span>(<span class="string">&#x27;postcss-preset-env&#x27;</span>)],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Webpack打包静态资源"><a href="#Webpack打包静态资源" class="headerlink" title="Webpack打包静态资源"></a>Webpack打包静态资源</h2><h3 id="打包图片资源"><a href="#打包图片资源" class="headerlink" title="打包图片资源"></a>打包图片资源</h3><ul>
<li>为了演示我们项目中可以加载图片，我们需要在项目中使用图片，比较常见的使用图片的方式是两种：<ul>
<li>img 元素，设置 src 属性；</li>
<li>其他元素（比如 div ），设置 background-image 的 css 属性；</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// element.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;../css/image.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置背景图片</span></span><br><span class="line"><span class="keyword">const</span> bgDivEl = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>)</span><br><span class="line">bgDivEl.<span class="property">className</span> = <span class="string">&quot;image-bg&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** image.css */</span></span><br><span class="line"><span class="selector-class">.image-bg</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&#x27;../img/01.jpg&#x27;</span>) no-repeat;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">100%</span> <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>这个时候，打包会报错<ul>
<li>(测试时直接就打包过去了,并没有报错,也可以正常显示在页面中,并没有配置 file-loader ,与视频中的操作不同)</li>
</ul>
</li>
</ul>
<h3 id="file-loader"><a href="#file-loader" class="headerlink" title="file-loader"></a>file-loader</h3><h4 id="file-loader的作用"><a href="#file-loader的作用" class="headerlink" title="file-loader的作用"></a>file-loader的作用</h4><ul>
<li>要处理 jpg、png 等格式的图片，我们也需要有对应的 loader：file-loader</li>
<li>file-loader 的作用就是帮助我们处理 import&#x2F;require() 方式引入的一个文件资源，并且会将它放到我们输出的文件夹中；<ul>
<li>如果通过原生JS给img添加图片,需要将图片作为一个模块导入,不能直接赋值图片的url地址</li>
</ul>
</li>
<li>当然我们待会儿可以学习如何修改它的名字和所在文件夹；</li>
</ul>
<h4 id="file-loader的安装"><a href="#file-loader的安装" class="headerlink" title="file-loader的安装"></a>file-loader的安装</h4><ul>
<li>命令 : <strong>npm install file-loader -D</strong></li>
</ul>
<h4 id="file-loader的配置"><a href="#file-loader的配置" class="headerlink" title="file-loader的配置"></a>file-loader的配置</h4><ul>
<li>配置处理图片的 Rule：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>) <span class="comment">// 导入node的内置path模块</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 打包入口</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">  <span class="comment">// 打包出口</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./build&#x27;</span>), <span class="comment">// 出口目录</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span>, <span class="comment">// 出口文件名</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 模块</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">//匹配处理其他资源....</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment">//匹配处理图片资源</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(jpg|jpeg|gif|png|svg)$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="attr">esModule</span>: <span class="literal">false</span>,<span class="comment">// webpack5 中必须要添加这两项,否则打包的css文件中的背景图片无法显示在页面中</span></span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;javascript/auto&#x27;</span>,<span class="comment">// webpack5 中必须要添加这两项,否则打包的css文件中的背景图片无法显示在页面中</span></span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>注意点: 如果通过原生 JS 给 img 添加图片,需要将图片作为一个模块导入,不能直接赋值图片的 url 地址,否则图片可以打包但不能显示在页面中</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// element.js</span></span><br><span class="line"><span class="keyword">import</span> meinvImg <span class="keyword">from</span> <span class="string">&quot;../img/02.jpg&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建 img 标签</span></span><br><span class="line"><span class="keyword">const</span> imgEl = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;img&quot;</span>)</span><br><span class="line">imgEl.<span class="property">src</span> = meinvImg</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(imgEl)</span><br></pre></td></tr></table></figure>

<h4 id="文件的命名规则"><a href="#文件的命名规则" class="headerlink" title="文件的命名规则"></a>文件的命名规则</h4><ul>
<li><p>有时候我们处理后的文件名称按照一定的规则进行显示：</p>
<ul>
<li>比如保留原来的文件名、扩展名，同时为了防止重复，包含一个 hash 值等；</li>
</ul>
</li>
<li><p>这个时候我们可以使用 PlaceHolders 来完成，webpack 给我们提供了大量的 PlaceHolders 来显示不同的内容：</p>
<ul>
<li>我们可以在文档中查阅自己需要的 placeholder；<ul>
<li><a target="_blank" rel="noopener" href="https://webpack.js.org/loaders/file-loader/#placeholders">https://webpack.js.org/loaders/file-loader/#placeholders</a></li>
</ul>
</li>
</ul>
</li>
<li><p>我们这里介绍几个最常用的 placeholder：</p>
<ul>
<li>[ext]：处理文件的扩展名；</li>
<li>[name]：处理文件的名称；</li>
<li>[hash]：文件的内容，使用 MD4 的散列函数处理，生成的一个 128 位的 hash 值（32 个十六进制）；</li>
<li>[contentHash]：在 file-loader 中和 [hash] 结果是一致的（在 webpack 的一些其他地方不一样，后面会讲到）；</li>
<li>[hash:length]：截图 hash 的长度，默认 32 个字符太长了；</li>
<li>[path]：文件相对于 webpack 配置文件的路径；</li>
</ul>
</li>
</ul>
<h4 id="设置文件的名称"><a href="#设置文件的名称" class="headerlink" title="设置文件的名称"></a>设置文件的名称</h4><ul>
<li>那么我们可以按照如下的格式编写：<ul>
<li>这个也是 vue 的写法；</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//匹配图片资源</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.(jpg|jpeg|gif|png|svg)$/</span>,</span><br><span class="line">  <span class="attr">use</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">esModule</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="comment">// outputPath: &#x27;img&#x27;,//指定将图片打包到输出到 dist 中的 img 文件夹,也可以直接写到 name 属性中</span></span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;img/[name]_[hash:6].[ext]&#x27;</span>, <span class="comment">// 指定输出的文件名为原文件名,6位hash值以及原文件的扩展名</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;javascript/auto&#x27;</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h4 id="文件的存放路径"><a href="#文件的存放路径" class="headerlink" title="文件的存放路径"></a>文件的存放路径</h4><ul>
<li>当然，我们刚才通过 img&#x2F; 已经设置了文件夹，这个也是 vue、react 脚手架中常见的设置方式：<ul>
<li>其实按照这种设置方式就可以了；</li>
<li>当然我们也可以通过 outputPath 来设置输出的文件夹；</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模块</span></span><br><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">    <span class="comment">//...    </span></span><br><span class="line">    </span><br><span class="line">	<span class="comment">//匹配图片资源</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.(jpg|jpeg|gif|png|svg)$/</span>,</span><br><span class="line">      <span class="attr">use</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">esModule</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="comment">// outputPath: &#x27;img&#x27;,//指定将图片打包到输出到 dist 中的 img 文件夹,也可以直接写到 name 属性中</span></span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;img/[name]_[hash:6].[ext]&#x27;</span>, <span class="comment">// 指定输出的文件名为原文件名,6位hash值以及原文件的扩展名</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;javascript/auto&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="url-loader"><a href="#url-loader" class="headerlink" title="url-loader"></a>url-loader</h3><ul>
<li>url-loade 和 file-loader 的工作方式是相似的，但是<strong>可以将较小的文件，转成 base64 的 URI</strong>。<ul>
<li>就是会将体积较小的文件,会以 base64 编码打包压缩到出口文件 <strong>.&#x2F;dist&#x2F;bundle.js</strong> 文件中</li>
</ul>
</li>
</ul>
<h4 id="url-loader的安装"><a href="#url-loader的安装" class="headerlink" title="url-loader的安装"></a>url-loader的安装</h4><ul>
<li>安装 url-loader：<strong>npm install url-loader -D</strong></li>
</ul>
<h4 id="url-loader的配置"><a href="#url-loader的配置" class="headerlink" title="url-loader的配置"></a>url-loader的配置</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模块</span></span><br><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//匹配图片资源</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.(jpg|jpeg|gif|png|svg)$/</span>,</span><br><span class="line">      <span class="attr">use</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">esModule</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="comment">// outputPath: &#x27;img&#x27;,//指定将图片打包到输出到 dist 中的 img 文件夹,也可以直接写到 name 属性中</span></span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;img/[name]_[hash:6].[ext]&#x27;</span>, <span class="comment">// 指定输出的文件名为原文件名,6位hash值以及原文件的扩展名</span></span><br><span class="line">            <span class="attr">limit</span>: <span class="number">100</span> * <span class="number">1024</span>, <span class="comment">// 小于 100k 的文件会打包压缩到出口文件 bundle.js 中,大于的直接打包不压缩</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;javascript/auto&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">   ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>显示结果是一样的，并且图片可以正常显示；</p>
</li>
<li><p>但是在 dist 文件夹中，我们会看不到图片文件：</p>
</li>
<li><p>这是因为我的两张图片的大小分别是 38kb 和 295kb；</p>
</li>
<li><p>默认情况下 url-loader 会将所有的图片文件转成 base64 编码</p>
</li>
</ul>
<h4 id="url-loader的limit"><a href="#url-loader的limit" class="headerlink" title="url-loader的limit"></a>url-loader的limit</h4><ul>
<li>但是开发中我们往往是小的图片需要转换，但是大的图片直接使用图片即可<ul>
<li>这是因为小的图片转换 base64 之后可以和页面一起被请求，减少不必要的请求过程；</li>
<li>而大的图片也进行转换，反而会影响页面的请求速度；</li>
</ul>
</li>
<li>那么，我们如何可以限制哪些大小的图片转换和不转换呢？<ul>
<li>url-loader 有一个 options 属性 limit，可以用于设置转换的限制；</li>
<li>下面的代码 38kb 的图片会进行 base64 编码，而 295kb 的不会；</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模块</span></span><br><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line"> <span class="comment">//匹配图片资源</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.(jpg|jpeg|gif|png|svg)$/</span>,</span><br><span class="line">      <span class="attr">use</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">esModule</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="comment">// outputPath: &#x27;img&#x27;,//指定将图片打包到输出到 dist 中的 img 文件夹,也可以直接写到 name 属性中</span></span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;img/[name]_[hash:6].[ext]&#x27;</span>, <span class="comment">// 指定输出的文件名为原文件名,6位hash值以及原文件的扩展名</span></span><br><span class="line">            <span class="attr">limit</span>: <span class="number">100</span> * <span class="number">1024</span>, <span class="comment">// 小于 100k 的文件会打包压缩到出口文件 bundle.js 中,大于的直接打包不压缩</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;javascript/auto&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="asset-module-type"><a href="#asset-module-type" class="headerlink" title="asset module type"></a>asset module type</h3><h4 id="认识-asset-module-type"><a href="#认识-asset-module-type" class="headerlink" title="认识 asset module type"></a>认识 asset module type</h4><ul>
<li>我们当前使用的 webpack 版本是 webpack5：<ul>
<li>在webpack5 之前，加载这些资源我们需要使用一些 loader，比如raw-loader 、url-loader、file-loader；</li>
<li>在webpack5 开始，我们可以直接使用资源模块类型（asset module type），来替代上面的这些 loader；</li>
</ul>
</li>
<li>资源模块类型(asset module type)，通过添加 4 种新的模块类型，来替换所有这些 loader：<ul>
<li>asset&#x2F;resource 发送一个单独的文件并导出 URL。之前通过使用 file-loader 实现；</li>
<li>asset&#x2F;inline 导出一个资源的 data URI。之前通过使用 url-loader 实现；</li>
<li>asset&#x2F;source 导出资源的源代码。之前通过使用 raw-loader 实现；</li>
<li>asset 在导出一个 data URI 和发送一个单独的文件之间自动选择。之前通过使用 url-loader，并且配置资源体积限制实现；</li>
</ul>
</li>
</ul>
<h4 id="使用asset-module-type"><a href="#使用asset-module-type" class="headerlink" title="使用asset module type"></a>使用asset module type</h4><ul>
<li>比如加载图片，我们可以使用下面的方式：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模块</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">//...</span></span><br><span class="line">			<span class="comment">//匹配图片资源</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(jpg|jpeg|gif|png|svg)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;asset&#x27;</span>, <span class="comment">// 直接使用资源模块类型来替代 loader</span></span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&#x27;img/[name]_[hash:6].[ext]&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">100</span> * <span class="number">1024</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>但是，如何可以自定义文件的输出路径和文件名呢？<ul>
<li>方式一：修改 output，添加 assetModuleFilename 属性；</li>
<li>方式二：在 Rule 中，添加一个 generator 属性，并且设置 filename；</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式一:</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./dist&#x27;</span>), <span class="comment">// 出口目录</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span>, <span class="comment">// 出口文件名</span></span><br><span class="line">    <span class="attr">assetModuleFilename</span>: <span class="string">&#x27;img/[name]_[hash:6].[ext]&#x27;</span>,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式二:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 模块</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">//...</span></span><br><span class="line">      <span class="comment">//匹配图片资源</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(jpg|jpeg|gif|png|svg)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;asset&#x27;</span>, <span class="comment">// 直接使用资源模块类型来替代 loader</span></span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&#x27;img/[name]_[hash:6].[ext]&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">100</span> * <span class="number">1024</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="limit"><a href="#limit" class="headerlink" title="limit"></a>limit</h4><ul>
<li>我们需要两个步骤来实现：<ul>
<li>步骤一：将 type 修改为 asset；</li>
<li>骤二：添加一个 parser 属性，并且制定 dataUrl 的条件，添加 maxSize 属性；</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模块</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">//...</span></span><br><span class="line">      <span class="comment">//匹配图片资源</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(jpg|jpeg|gif|png|svg)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;asset&#x27;</span>, <span class="comment">// 直接使用资源模块类型来替代 loader</span></span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&#x27;img/[name]_[hash:6].[ext]&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">100</span> * <span class="number">1024</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h3 id="打包字体文件"><a href="#打包字体文件" class="headerlink" title="打包字体文件"></a>打包字体文件</h3><h4 id="加载字体文件"><a href="#加载字体文件" class="headerlink" title="加载字体文件"></a>加载字体文件</h4><ul>
<li>如果我们需要使用某些特殊的字体或者字体图标，那么我们会引入很多字体相关的文件，这些文件的处理也是一样的。</li>
<li>首先，我从阿里图标库中下载了几个字体图标：</li>
<li>在 component 中引入，并且添加一个 i 元素用于显示字体图标：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// element.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;../font/iconfont.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字体图标</span></span><br><span class="line"><span class="keyword">const</span> iEl = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;i&quot;</span>)</span><br><span class="line">iEl.<span class="property">className</span> = <span class="string">&quot;iconfont icon-duigou&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(iEl)</span><br></pre></td></tr></table></figure>

<h4 id="字体文件的打包"><a href="#字体文件的打包" class="headerlink" title="字体文件的打包"></a>字体文件的打包</h4><ul>
<li>这个时候打包会报错，因为无法正确的处理 eot、ttf、woff 等文件：<ul>
<li>(测试时并没有报错,而是直接打包过去了,也可以正常显示在页面中)<ul>
<li>被打包到了 img 文件夹中,img 图片使用的是 asset 模块打包</li>
</ul>
</li>
<li>我们可以选择使用 file-loader 来处理，也可以选择直接使用 webpack5 的资源模块类型来处理；</li>
</ul>
</li>
<li>使用 file-loader 来处理:<ul>
<li>能正常打包,但是也同时打包到了 img 文件夹中,img 图片使用的是 asset 模块打包</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模块</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">//...      </span></span><br><span class="line">      </span><br><span class="line">		  <span class="comment">//匹配字体资源</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(eot|ttf|woff2?)$/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&quot;file-loader&quot;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>:<span class="string">&quot;font/[name]_[hash:6].[ext]&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   ]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用 webpack5 的资源模块类型来处理:<ul>
<li>正常打包,图片打包到 img 文件夹, 字体打包到 font 文件夹</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模块</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">//...      </span></span><br><span class="line">      </span><br><span class="line">			<span class="comment">//匹配字体资源</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(eot|ttf|woff2?)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;asset/resource&#x27;</span>,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&#x27;font/[name]_[hash:6].[ext]&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">   ]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h2 id="Plugin"><a href="#Plugin" class="headerlink" title="Plugin"></a>Plugin</h2><h3 id="认识Plugin"><a href="#认识Plugin" class="headerlink" title="认识Plugin"></a>认识Plugin</h3><ul>
<li><p>Webpack的另一个核心是 Plugin，官方有这样一段对 Plugin 的描述：</p>
<ul>
<li>While loaders are used to transform certain types of modules, plugins can be leveraged to perform a wider range of tasks like bundle optimization, asset management and injection of environment variables.</li>
</ul>
</li>
<li><p>上面表达的含义翻译过来就是：</p>
<ul>
<li>Loader是用于特定的模块类型进行转换；</li>
<li>Plugin可以用于执行更加广泛的任务，比如打包优化、资源管理、环境变量注入等；</li>
</ul>
</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://s1.vika.cn/space/2024/01/28/cee39ddbacbc42fa826744a1a4832d9f" alt="1663663891628"></p>
<h3 id="CleanWebpackPlugin"><a href="#CleanWebpackPlugin" class="headerlink" title="CleanWebpackPlugin"></a>CleanWebpackPlugin</h3><ul>
<li>前面我们演示的过程中，每次修改了一些配置，重新打包时，都需要手动删除 dist 文件夹：<ul>
<li>我们可以借助于一个插件来帮助我们完成，这个插件就是 CleanWebpackPlugin；</li>
</ul>
</li>
<li>首先，我们先安装这个插件：<strong>npm install clean-webpack-plugin -D</strong></li>
<li>之后在配置文件中配置插件：<ul>
<li>第一步: 导入 CleanWebpackPlugin</li>
<li>第二步: 在 plugins 中创建 CleanWebpackPlugin 类的实例对象</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>) <span class="comment">// 导入node的内置path模块</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">CleanWebpackPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 打包入口</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">  <span class="comment">// 打包出口</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./dist&#x27;</span>), <span class="comment">// 出口目录</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span>, <span class="comment">// 出口文件名</span></span><br><span class="line">    <span class="attr">assetModuleFilename</span>: <span class="string">&#x27;img/[name]_[hash:6].[ext]&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 模块</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">			<span class="comment">//...</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="keyword">new</span> <span class="title class_">CleanWebpackPlugin</span>()],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="HtmlWebpackPlugin"><a href="#HtmlWebpackPlugin" class="headerlink" title="HtmlWebpackPlugin"></a>HtmlWebpackPlugin</h3><ul>
<li>另外还有一个不太规范的地方：<ul>
<li>我们的HTML文件是编写在根目录下的，而最终打包的dist文件夹中是没有index.html文件的。</li>
<li>在进行项目部署的时，必然也是需要有对应的入口文件index.html；</li>
<li>所以我们也需要对index.html进行打包处理；</li>
</ul>
</li>
<li>对 HTML 进行打包处理我们可以使用另外一个插件：HtmlWebpackPlugin；</li>
<li>安装插件 : <strong>npm install html-webpack-plugin -D</strong></li>
<li>配置插件:</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>) <span class="comment">// 导入node的内置path模块</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">CleanWebpackPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 打包入口</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">  <span class="comment">// 打包出口</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./dist&#x27;</span>), <span class="comment">// 出口目录</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span>, <span class="comment">// 出口文件名</span></span><br><span class="line">    <span class="attr">assetModuleFilename</span>: <span class="string">&#x27;img/[name]_[hash:6].[ext]&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 模块</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">			<span class="comment">//...</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="keyword">new</span> <span class="title class_">CleanWebpackPlugin</span>(),<span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>()],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="自定义HTML模板"><a href="#自定义HTML模板" class="headerlink" title="自定义HTML模板"></a>自定义HTML模板</h3><h4 id="自定义HTML模板-1"><a href="#自定义HTML模板-1" class="headerlink" title="自定义HTML模板"></a>自定义HTML模板</h4><ul>
<li>我们会发现，现在自动在 dist 文件夹中，生成了一个 index.html 的文件：<ul>
<li>该文件中也自动添加了我们打包的 bundle.js 文件；</li>
</ul>
</li>
<li>这个文件是如何生成的呢？<ul>
<li>默认情况下是根据 ejs 的一个模板来生成的；</li>
<li>在 html-webpack-plugin 的源码中，有一个 default_index.ejs 模块；</li>
</ul>
</li>
<li>如果我们想在自己的模块中加入一些比较特别的内容：<ul>
<li>比如添加一个 noscript 标签，在用户的 JavaScript 被关闭时，给予响应的提示；</li>
<li>比如在开发 vue 或者 react 项目时，我们需要一个可以挂载后续组件的根标签 <code>&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</code>；</li>
</ul>
</li>
<li>这个我们需要一个属于自己的 index.html 模块：</li>
</ul>
<p><strong>.&#x2F;public&#x2F;index.html</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span></span><br><span class="line">    &lt;%= htmlWebpackPlugin.options.title %&gt;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>上面的代码中，会有一些类似这样的语法 <code>&lt;% 变量 %&gt;</code>，这个是 EJS 模块填充数据的方式。</li>
<li>在配置 HtmlWebpackPlugin 时，我们可以添加如下配置：<ul>
<li>template：指定我们要使用的模块所在的路径；</li>
<li>title：在进行 htmlWebpackPlugin.options.title 读取时，就会读到该信息；</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>) <span class="comment">// 导入node的内置path模块</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">CleanWebpackPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">DefinePlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 打包入口</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">  <span class="comment">// 打包出口</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./dist&#x27;</span>), <span class="comment">// 出口目录</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;js/bundle.js&#x27;</span>, <span class="comment">// 出口文件名</span></span><br><span class="line">    <span class="attr">assetModuleFilename</span>: <span class="string">&#x27;img/[name]_[hash:6].[ext]&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>:&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">CleanWebpackPlugin</span>(),</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;./public/index.html&#x27;</span>, <span class="comment">// 模板文件</span></span><br><span class="line">    <span class="attr">title</span>:<span class="string">&quot;hahaha~&quot;</span> <span class="comment">// 根据模板生成的 html 的 title 属性 </span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">DefinePlugin</span>(&#123;</span><br><span class="line">    <span class="attr">BASE_URL</span>: <span class="string">&quot;&#x27;./&#x27;&quot;</span>, <span class="comment">// 定义全局常量</span></span><br><span class="line">  &#125;),</span><br><span class="line"> ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>但是，这个时候编译还是会报错，因为在我们的模块中还使用到一个 BASE_URL 的常量：</li>
</ul>
<h4 id="DefinePlugin的介绍"><a href="#DefinePlugin的介绍" class="headerlink" title="DefinePlugin的介绍"></a>DefinePlugin的介绍</h4><ul>
<li>这是因为在编译template模块时，有一个BASE_URL：<ul>
<li><code>&lt;link rel=&quot;icon&quot; href=&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;&gt;</code>；</li>
<li>但是我们并没有设置过这个常量值，所以会出现没有定义的错误；</li>
</ul>
</li>
<li>这个时候我们可以使用 DefinePlugin 插件；</li>
</ul>
<h4 id="DefinePlugin的使用"><a href="#DefinePlugin的使用" class="headerlink" title="DefinePlugin的使用"></a>DefinePlugin的使用</h4><ul>
<li>DefinePlugin 允许在编译时创建配置的全局常量，是一个 webpack 内置的插件（不需要单独安装）：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>) <span class="comment">// 导入node的内置path模块</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">CleanWebpackPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">DefinePlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 打包入口</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">  <span class="comment">// 打包出口</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./dist&#x27;</span>), <span class="comment">// 出口目录</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;js/bundle.js&#x27;</span>, <span class="comment">// 出口文件名</span></span><br><span class="line">    <span class="attr">assetModuleFilename</span>: <span class="string">&#x27;img/[name]_[hash:6].[ext]&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>:&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">CleanWebpackPlugin</span>(),</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;./public/index.html&#x27;</span>, <span class="comment">// 模板文件</span></span><br><span class="line">    <span class="attr">title</span>:<span class="string">&quot;hahaha~&quot;</span> <span class="comment">// 根据模板生成的 html 的 title 属性 </span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">DefinePlugin</span>(&#123;</span><br><span class="line">    <span class="attr">BASE_URL</span>: <span class="string">&quot;&#x27;./&#x27;&quot;</span>, <span class="comment">// 定义全局常量</span></span><br><span class="line">  &#125;),</span><br><span class="line"> ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>这个时候，编译 template 就可以正确的编译了，会读取到 BASE_URL 的值；</li>
</ul>
<h3 id="CopyWebpackPlugin"><a href="#CopyWebpackPlugin" class="headerlink" title="CopyWebpackPlugin"></a>CopyWebpackPlugin</h3><ul>
<li><p>在 vue 的打包过程中，如果我们将一些文件放到 public 的目录下，那么这个目录会被复制到 dist 文件夹中。</p>
<ul>
<li>这个复制的功能，我们可以使用 CopyWebpackPlugin 来完成；</li>
</ul>
</li>
<li><p>安装 CopyWebpackPlugin 插件：</p>
<ul>
<li><strong>npm install copy-webpack-plugin -D</strong></li>
</ul>
</li>
<li><p>接下来配置 CopyWebpackPlugin 即可：</p>
<ul>
<li>复制的规则在 patterns 中设置；<ul>
<li>from：设置从哪一个源中开始复制；</li>
<li>to：复制到的位置，可以省略，会默认复制到打包的目录下；</li>
<li>globOptions：设置一些额外的选项，其中可以编写需要忽略的文件：<ul>
<li>.DS_Store：mac 目录下回自动生成的一个文件；</li>
<li>index.html：也不需要复制，因为我们已经通过 HtmlWebpackPlugin 完成了 index.html 的生成；</li>
</ul>
</li>
</ul>
</li>
<li>第一步: 导入 CopyWebpackPlugin</li>
<li>第二步: 创建 CopyWebpackPlugin 的实例对象</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>) <span class="comment">// 导入node的内置path模块</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">CleanWebpackPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>) </span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">DefinePlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CopyWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;copy-webpack-plugin&#x27;</span>) <span class="comment">// 01</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 打包入口</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">  <span class="comment">// 打包出口</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./dist&#x27;</span>), <span class="comment">// 出口目录</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;js/bundle.js&#x27;</span>, <span class="comment">// 出口文件名</span></span><br><span class="line">    <span class="attr">assetModuleFilename</span>: <span class="string">&#x27;img/[name]_[hash:6].[ext]&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>:&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">CleanWebpackPlugin</span>(),</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;./public/index.html&#x27;</span>, <span class="comment">// 模板文件</span></span><br><span class="line">    <span class="attr">title</span>:<span class="string">&quot;hahaha~&quot;</span> <span class="comment">// 根据模板生成的 html 的 title 属性 </span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">DefinePlugin</span>(&#123;</span><br><span class="line">    <span class="attr">BASE_URL</span>: <span class="string">&quot;&#x27;./&#x27;&quot;</span>, <span class="comment">// 定义全局常量</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">CopyWebpackPlugin</span>(&#123; <span class="comment">// 02</span></span><br><span class="line">      <span class="attr">patterns</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">from</span>: <span class="string">&#x27;public&#x27;</span>, <span class="comment">// 从哪里复制</span></span><br><span class="line">          <span class="attr">to</span>: <span class="string">&#x27;./&#x27;</span>, <span class="comment">// 复制到那里</span></span><br><span class="line">          <span class="attr">globOptions</span>: &#123;</span><br><span class="line">            <span class="attr">ignore</span>: [<span class="string">&#x27;**/index.html&#x27;</span>],<span class="comment">//忽略那些文件不复制</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;),</span><br><span class="line"> ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Mode与source-map"><a href="#Mode与source-map" class="headerlink" title="Mode与source-map"></a>Mode与source-map</h2><h3 id="Mode"><a href="#Mode" class="headerlink" title="Mode"></a>Mode</h3><ul>
<li>前面我们一直没有讲 mode。</li>
<li>Mode 配置选项，可以告知 webpack 使用响应模式的内置优化：<ul>
<li>默认值是 production（什么都不设置的情况下）；</li>
<li>可选值有：**’none’ | ‘development’ | ‘production’**；</li>
</ul>
</li>
<li>这几个选项有什么样的区别呢?</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://s1.vika.cn/space/2024/01/28/cacf1e9e13a44bceb57396699895c302" alt="1663679419906"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 模式  development,开发阶段使用 | production,生产上线阶段使用</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">  <span class="comment">// source-map  建立js映射文件,方便调试代码和错误</span></span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&#x27;source-map&#x27;</span>,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 打包入口</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="source-map"><a href="#source-map" class="headerlink" title="source-map"></a>source-map</h3><ul>
<li>source-map 的作用 : 建立 js 映射文件,方便调试代码和错误</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 模式  development,开发阶段使用 | production,生产上线阶段使用</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// source-map  建立js映射文件,方便调试代码和错误</span></span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&#x27;source-map&#x27;</span>,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 打包入口</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="babel"><a href="#babel" class="headerlink" title="babel"></a>babel</h2><h3 id="babel的作用"><a href="#babel的作用" class="headerlink" title="babel的作用"></a>babel的作用</h3><ul>
<li>事实上，在开发中我们很少直接去接触 babel，但是 babel 对于前端开发来说，目前是不可缺少的一部分：<ul>
<li>开发中，我们想要使用 ES6+ 的语法，想要使用T ypeScript，开发 React 项目，它们都是离不开 Babel 的；</li>
<li>所以，学习 Babel 对于我们理解代码从编写到线上的转变过程至关重要；</li>
</ul>
</li>
<li>那么，Babel 到底是什么呢？<ul>
<li>Babel 是一个工具链，<strong>主要用于旧浏览器或者环境中将 ECMAScript 2015+ 代码转换为向后兼容版本的 JavaScript；</strong></li>
<li>包括：语法转换、源代码转换等；</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> message = <span class="string">&#x27;Hello World&#x27;</span></span><br><span class="line"><span class="keyword">const</span> names = [<span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;cba&#x27;</span>, <span class="string">&#x27;nba&#x27;</span>]</span><br><span class="line"></span><br><span class="line">names.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(item)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="Babel命令行使用"><a href="#Babel命令行使用" class="headerlink" title="Babel命令行使用"></a>Babel命令行使用</h3><ul>
<li><p>babel 本身可以作为一个独立的工具（和 postcss 一样），不和 webpack 等构建工具配置来单独使用。</p>
</li>
<li><p>如果我们希望在命令行尝试使用 babel，需要安装如下库：</p>
<ul>
<li>@babel&#x2F;core：babel 的核心代码，必须安装；</li>
<li>@babel&#x2F;cli：可以让我们在命令行使用 babel；</li>
</ul>
</li>
<li><p>安装babel : <strong>npm install @babel&#x2F;cli @babel&#x2F;core -D</strong></p>
</li>
<li><p>使用 babel 来处理我们的源代码：<strong>npx babel .&#x2F;src&#x2F;js&#x2F;demo.js –out-dir dist</strong></p>
<ul>
<li>将指定文件通过 babel 转换后,输出到 dist 文件夹 ；</li>
<li>如果要输出成指定文件 : <strong>npx babel .&#x2F;src&#x2F;js&#x2F;demo.js –out-file test.js</strong></li>
</ul>
</li>
</ul>
<h3 id="插件的使用"><a href="#插件的使用" class="headerlink" title="插件的使用"></a>插件的使用</h3><ul>
<li><p>比如我们需要转换箭头函数，那么我们就可以使用箭头函数转换相关的插件：</p>
</li>
<li><p>安装插件 : <strong>npm install @babel&#x2F;plugin-transform-arrow-functions -D</strong></p>
</li>
<li><p>使用插件编译文件: <strong>npx babel demo.js –out-dir dist --plugins&#x3D;@babel&#x2F;plugin-transform-arrow-functions</strong></p>
</li>
<li><p>查看转换后的结果：我们会发现 const 并没有转成 var</p>
<ul>
<li>这是因为 plugin-transform-arrow-functions，并没有提供这样的功能；</li>
<li>我们需要使用 plugin-transform-block-scoping 来完成这样的功能；</li>
<li>安装插件 : <strong>npm install @babel&#x2F;plugin-transform-block-scoping -D</strong></li>
</ul>
</li>
<li><p>使用插件编译文件: <strong>npx babel demo.js –out-dir dist --plugins&#x3D;@babel&#x2F;plugin-transform-block-scoping,@babel&#x2F;plugin-transform-arrow-functions</strong></p>
</li>
</ul>
<h3 id="Babel的预设preset"><a href="#Babel的预设preset" class="headerlink" title="Babel的预设preset"></a>Babel的预设preset</h3><ul>
<li>但是如果要转换的内容过多，一个个设置是比较麻烦的，我们可以使用预设（preset）：<ul>
<li>后面我们再具体来讲预设代表的含义；</li>
</ul>
</li>
<li>安装 @babel&#x2F;preset-env 预设：<ul>
<li><strong>npm install @babel&#x2F;preset-env -D</strong></li>
</ul>
</li>
<li>执行如下命令编译文件：<ul>
<li><strong>npx babel src –out-dir dist --presets&#x3D;@babel&#x2F;preset-env</strong></li>
<li><strong>npx babel demo.js –out-dir dist --presets&#x3D;@babel&#x2F;preset-env</strong></li>
</ul>
</li>
<li>编译后的文件默认开启严格模式</li>
</ul>
<h3 id="Babel的底层原理"><a href="#Babel的底层原理" class="headerlink" title="Babel的底层原理"></a>Babel的底层原理</h3><ul>
<li><p>babel 是如何做到将我们的一段代码（ES6、TypeScript、React）转成另外一段代码（ES5）的呢？</p>
<ul>
<li>从一种源代码（原生语言）转换成另一种源代码（目标语言），这是什么的工作呢？<ul>
<li>就是编译器，事实上我们可以将 babel 看成就是一个编译器。</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Babel 编译器的作用就是将我们的源代码，转换成浏览器可以直接识别的另外一段源代码；</strong></p>
</li>
<li><p>Babel也拥有编译器的工作流程：</p>
<ul>
<li>解析阶段（Parsing）</li>
<li>转换阶段（Transformation）</li>
<li>生成阶段（Code Generation）</li>
</ul>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/jamiebuilds/the-super-tiny-compiler">https://github.com/jamiebuilds/the-super-tiny-compiler</a></p>
</li>
</ul>
<h3 id="Babel的编译流程"><a href="#Babel的编译流程" class="headerlink" title="Babel的编译流程"></a>Babel的编译流程</h3><ul>
<li>Babel的执行阶段<ul>
<li>当然，这只是一个简化版的编译器工具流程，在每个阶段又会有自己具体的工作：</li>
</ul>
</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://s1.vika.cn/space/2024/01/28/9036b3dbee8340b8bc5cf01858e0f38f" alt="1663683935940"></p>
<ul>
<li>详细的编译流程:</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://s1.vika.cn/space/2024/01/28/af2343fc54354a7f9acc347bb517c406" alt="1663683985575"></p>
<h3 id="Babel-loader"><a href="#Babel-loader" class="headerlink" title="Babel-loader"></a>Babel-loader</h3><ul>
<li>在实际开发中，我们通常会在构建工具中通过配置 babel 来对其进行使用的，比如在 webpack 中。</li>
<li>那么我们就需要去安装相关的依赖：<ul>
<li>如果之前已经安装了 @babel&#x2F;core，那么这里不需要再次安装；<ul>
<li><strong>npm install babel-loader @babel&#x2F;core -D</strong></li>
</ul>
</li>
</ul>
</li>
<li>我们可以设置一个规则，在加载 js 文件时，使用我们的 babel：我们必须指定使用的插件才会生效</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 匹配 js 文件</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">  <span class="attr">use</span>: &#123;</span><br><span class="line">    <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">      <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="string">&#x27;@babel/plugin-transform-block-scoping&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;@babel/plugin-transform-arrow-functions&#x27;</span>,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="babel-preset"><a href="#babel-preset" class="headerlink" title="babel-preset"></a>babel-preset</h3><ul>
<li><p>如果我们一个个去安装使用插件，那么需要手动来管理大量的babel插件，我们可以直接给webpack提供一个preset，webpack会根据我们的预设来加载对应的插件列表，并且将其传递给babel。</p>
</li>
<li><p>比如常见的预设有三个：</p>
<ul>
<li>env</li>
<li>preact </li>
<li>TypeScript</li>
</ul>
</li>
<li><p>安装 preset-env：<strong>npm install @babel&#x2F;preset-env</strong></p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 匹配 js 文件</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">  <span class="attr">use</span>: &#123;</span><br><span class="line">    <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">      <span class="comment">// plugins: [</span></span><br><span class="line">      <span class="comment">//   &#x27;@babel/plugin-transform-block-scoping&#x27;,</span></span><br><span class="line">      <span class="comment">//   &#x27;@babel/plugin-transform-arrow-functions&#x27;,</span></span><br><span class="line">      <span class="comment">// ],</span></span><br><span class="line">      <span class="attr">presets</span>: [<span class="string">&#x27;@babel/preset-env&#x27;</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="Babel的配置文件"><a href="#Babel的配置文件" class="headerlink" title="Babel的配置文件"></a>Babel的配置文件</h3><ul>
<li>像之前一样，我们可以将 babel 的配置信息放到一个独立的文件中，babel 给我们提供了两种配置文件的编写：<ul>
<li>babel.config.json（或者.js，.cjs，.mjs）文件；</li>
<li>babelrc.json（或者.babelrc，.js，.cjs，.mjs）文件；</li>
</ul>
</li>
<li>它们两个有什么区别呢？目前很多的项目都采用了多包管理的方式（ babel 本身、element-plus、umi等）；<ul>
<li>babelrc.json：早期使用较多的配置方式，但是对于配置 Monorepos 项目是比较麻烦的；</li>
<li>babel.config.json（babel7）：可以直接作用于 Monorepos 项目的子包，更加推荐；</li>
</ul>
</li>
</ul>
<p><strong>babel.config.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">presets</span>: [<span class="string">&#x27;@babel/preset-env&#x27;</span>],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>webpack.config.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 匹配 js 文件</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">  <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="对Vue文件的打包"><a href="#对Vue文件的打包" class="headerlink" title="对Vue文件的打包"></a>对Vue文件的打包</h2><h3 id="对-vue-代码的打包"><a href="#对-vue-代码的打包" class="headerlink" title="对 vue 代码的打包"></a>对 vue 代码的打包</h3><ul>
<li>安装 vue3:  <strong>npm install vue@next</strong></li>
</ul>
<p><strong>element.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;h2&gt;我是vue渲染出来的&lt;/h2&gt;&#x27;</span>,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;Hello world~&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>界面上是没有效果的：<ul>
<li>并且我们查看运行的控制台，会发现有警告信息；</li>
</ul>
</li>
</ul>
<h3 id="对-vue-不同版本的解析"><a href="#对-vue-不同版本的解析" class="headerlink" title="对 vue 不同版本的解析"></a>对 vue 不同版本的解析</h3><ul>
<li>vue(.runtime).global(.prod).js：<ul>
<li>通过浏览器中的 <code>&lt;script src=&quot;...&quot;&gt;</code> 直接使用；</li>
<li>我们之前通过 CDN 引入和下载的Vue版本就是这个版本；</li>
<li>会暴露一个全局的 Vue 来使用；</li>
</ul>
</li>
<li>vue(.runtime).esm-browser(.prod).js：<ul>
<li>用于通过原生 ES 模块导入使用 (在浏览器中通过<code>&lt;script type=&quot;module&quot;&gt;</code>来使用)。</li>
</ul>
</li>
<li>vue(.runtime).esm-bundler.js：<ul>
<li>用于 webpack，rollup 和 parcel 等构建工具；</li>
<li>构建工具中默认是 vue.runtime.esm-bundler.js；</li>
<li>如果我们需要解析模板 template，那么需要手动指定 vue.esm-bundler.js；</li>
</ul>
</li>
<li>vue.cjs(.prod).js：<ul>
<li>服务器端渲染使用；</li>
<li>通过 require() 在 Node.js 中使用；</li>
</ul>
</li>
</ul>
<h3 id="对-template-模板的解析"><a href="#对-template-模板的解析" class="headerlink" title="对 template 模板的解析"></a>对 template 模板的解析</h3><ul>
<li><p>在 Vue 的开发过程中我们有三种方式来编写 DOM 元素：</p>
<ul>
<li>方式一：template 模板的方式（之前经常使用的方式）；</li>
<li>方式二：render 函数的方式，使用h函数来编写渲染的内容；</li>
<li>方式三：通过.vue 文件中的 template 来编写模板；</li>
</ul>
</li>
<li><p>它们的模板分别是如何处理的呢？</p>
<ul>
<li>方式二中的 h 函数可以直接返回一个虚拟节点，也就是 Vnode 节点；</li>
<li>方式一和方式三的 template 都需要有特定的代码来对其进行解析：<ul>
<li>方式三 .vue 文件中的template可以通过在 vue-loader 对其进行编译和处理；</li>
<li>方式一中的 template 我们必须要通过源码中一部分代码来进行编译；</li>
</ul>
</li>
</ul>
</li>
<li><p>所以，Vue 在让我们选择版本的时候分为 运行时+编译器 vs 仅运行时</p>
<ul>
<li>运行时+编译器包含了对 template 模板的编译代码，更加完整，但是也更大一些；</li>
<li>仅运行时没有包含对 template 版本的编译代码，相对更小一些；</li>
</ul>
</li>
<li><p>我们会发现控制台还有另外的一个警告：</p>
</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://s1.vika.cn/space/2024/01/28/fd773a04f5dd466193098105a4a58859" alt="1663768532446"></p>
<p>在 GitHub 上的文档中我们可以找到说明：</p>
<ul>
<li>这是两个特性的标识，一个是使用 Vue 的 Options，一个是 Production 模式下是否支持 devtools 工具；</li>
<li>虽然他们都有默认值，但是强烈建议我们手动对他们进行配置；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">DefinePlugin</span>(&#123;</span><br><span class="line">    <span class="attr">BASE_URL</span>: <span class="string">&quot;&#x27;./&#x27;&quot;</span>,</span><br><span class="line">    <span class="attr">__VUE_OPTIONS_API__</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">__VUE_PROD_DEVTOOLS__</span>: <span class="literal">false</span>,</span><br><span class="line">  &#125;),</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<h3 id="对vue单文件组件的打包"><a href="#对vue单文件组件的打包" class="headerlink" title="对vue单文件组件的打包"></a>对vue单文件组件的打包</h3><p><strong>App.vue</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2 class=&quot;header&quot;&gt;我是vue渲染出来的&#123;&#123; title &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;&#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123; title: &#x27;Hello world~&#x27; &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;&#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.header &#123;</span><br><span class="line">  color: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>我们对代码打包会报错：我们需要合适的 Loader 来处理文件。</li>
<li>这个时候我们需要使用 vue-loader：<ul>
<li>安装 vue-loader : <strong>npm install vue-loader -D</strong></li>
</ul>
</li>
<li>在 webpack 的模板规则中进行配置：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 匹配 .vue 文件</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.vue$/</span>,</span><br><span class="line">  <span class="attr">loader</span>: <span class="string">&#x27;vue-loader&#x27;</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li><p>打包依然会报错，这是因为我们必须添加 @vue&#x2F;compiler-sfc 来对 template 进行解析：</p>
</li>
<li><p>安装插件 : <strong>npm install @vue&#x2F;compiler-sfc -D</strong></p>
</li>
<li><p>另外我们还需要配置对应的 Vue 插件：</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">VueLoaderPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;vue-loader/dist/index&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">		<span class="comment">//...</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">VueLoaderPlugin</span>(),</span><br><span class="line">  ],</span><br></pre></td></tr></table></figure>

<p>重新打包即可支持 App.vue 的写法, 另外，我们也可以编写其他的 .vue 文件来编写自己的组件；</p>
<h2 id="搭建本地服务"><a href="#搭建本地服务" class="headerlink" title="搭建本地服务"></a>搭建本地服务</h2><h3 id="搭建本地服务器"><a href="#搭建本地服务器" class="headerlink" title="搭建本地服务器"></a>搭建本地服务器</h3><ul>
<li>目前我们开发的代码，为了运行需要有两个操作：<ul>
<li>操作一：npm run build，编译相关的代码；</li>
<li>操作二：通过 live server 或者直接通过浏览器，打开 index.html 代码，查看效果；</li>
</ul>
</li>
<li>这个过程经常操作会影响我们的开发效率，我们希望可以做到，当文件发生变化时，可以自动的完成 编译 和 展示；</li>
<li>为了完成自动编译，webpack 提供了几种可选的方式：<ul>
<li>webpack watch mode；</li>
<li>webpack-dev-server（常用）；</li>
<li>webpack-dev-middleware；</li>
</ul>
</li>
</ul>
<h3 id="实时自动编译"><a href="#实时自动编译" class="headerlink" title="实时自动编译"></a>实时自动编译</h3><ul>
<li>webpack 给我们提供了 watch 模式：<ul>
<li>在该模式下，webpack 依赖图中的所有文件，只要有一个发生了更新，那么代码将被重新编译；</li>
<li>我们不需要手动去运行 npm run build 指令了；</li>
</ul>
</li>
<li>如何开启 watch 呢？两种方式：<ul>
<li>方式一：在导出的 <strong>webpack.config.js</strong> 配置中，添加 <strong>watch: true</strong></li>
<li>方式二：在启动 webpack 的命令中，添加 –watch 的标识；</li>
</ul>
</li>
<li>这里我们选择方式二，在 <strong>package.json</strong> 的 scripts 中添加一个 watch 脚本</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>,</span><br><span class="line">  <span class="string">&quot;build&quot;</span>: <span class="string">&quot;webpack --watch&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="实时刷新页面"><a href="#实时刷新页面" class="headerlink" title="实时刷新页面"></a>实时刷新页面</h3><ul>
<li><p>上面的方式可以监听到文件的变化，但是事实上它本身是没有自动刷新浏览器的功能的：</p>
<ul>
<li>当然，目前我们可以在 VSCode 中使用 live-server 来完成这样的功能；</li>
<li>但是，我们希望在不适用 live-server 的情况下，可以具备 live reloading（实时重新加载）的功能；</li>
</ul>
</li>
<li><p>安装 webpack-dev-server,提供本地服务,实现实时刷新网页</p>
</li>
<li><p>安装插件 : <strong>npm install webpack-dev-server -D</strong></p>
</li>
<li><p>在 <strong>package.json</strong> 中,添加 serve 指令:</p>
</li>
</ul>
<p><strong>package.json</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;build&quot;</span>: <span class="string">&quot;webpack --watch&quot;</span>,</span><br><span class="line">  <span class="string">&quot;serve&quot;</span>: <span class="string">&quot;webpack serve&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li>webpack-dev-server 在编译之后不会写入到任何输出文件。而是将 bundle 文件保留在内存中：<ul>
<li>事实上 webpack-dev-server 使用了一个库叫 memfs（memory-fs webpack 自己写的）</li>
</ul>
</li>
</ul>
<h3 id="热替换HMR"><a href="#热替换HMR" class="headerlink" title="热替换HMR"></a>热替换HMR</h3><h4 id="认识HMR"><a href="#认识HMR" class="headerlink" title="认识HMR"></a>认识HMR</h4><ul>
<li>什么是 HMR 呢？<ul>
<li>HMR 的全称是 Hot Module Replacement，翻译为模块热替换；</li>
<li>模块热替换是指在 应用程序运行过程中，替换、添加、删除模块，而无需重新刷新整个页面；</li>
</ul>
</li>
<li>HMR通过如下几种方式，来提高开发的速度：<ul>
<li>不重新加载整个页面，这样可以保留某些应用程序的状态不丢失；</li>
<li>只更新需要变化的内容，节省开发的时间；</li>
<li>修改了 css、js 源代码，会立即在浏览器更新，相当于直接在浏览器的 devtools 中直接修改样式；</li>
</ul>
</li>
<li>如何使用 HMR 呢？<ul>
<li>默认情况下，webpack-dev-server 已经支持 HMR，我们只需要开启即可；</li>
<li>在不开启 HMR 的情况下，当我们修改了源代码之后，整个页面会自动刷新，使用的是 live reloading；</li>
</ul>
</li>
</ul>
<h4 id="开启HMR"><a href="#开启HMR" class="headerlink" title="开启HMR"></a>开启HMR</h4><ul>
<li>修改 <strong>webpack.config.js</strong> 的配置：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// web 环境</span></span><br><span class="line"><span class="attr">target</span>: <span class="string">&#x27;web&#x27;</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 本地服务</span></span><br><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">  <span class="comment">// contentBase: &#x27;./public&#x27;, // 测试时添加 contentBase 会报错</span></span><br><span class="line">  <span class="attr">hot</span>: <span class="literal">true</span>, <span class="comment">// 开启热替换</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li><p>浏览器可以看到如下效果：</p>
</li>
<li><p>但是你会发现，当我们修改了某一个模块的代码时，依然是刷新的整个页面：</p>
<ul>
<li>这是因为我们需要去指定哪些模块发生更新时，进行 HMR；</li>
</ul>
</li>
</ul>
<p><strong>index.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./js/element&#x27;</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable language_">module</span>.<span class="property">hot</span>) &#123;</span><br><span class="line">  <span class="variable language_">module</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="string">&#x27;./js/element.js&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;element模块发生了更新~~&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="框架的HMR"><a href="#框架的HMR" class="headerlink" title="框架的HMR"></a>框架的HMR</h4><ul>
<li>有一个问题：在开发其他项目时，我们是否需要经常手动去写入 module.hot.accpet相关的API呢？<ul>
<li>比如开发 Vue、React 项目，我们修改了组件，希望进行热更新，这个时候应该如何去操作呢？</li>
<li>事实上社区已经针对这些有很成熟的解决方案了：<ul>
<li>比如 vue 开发中，我们使用 vue-loader，此 loader 支持 vue 组件的 HMR，提供开箱即用的体验；</li>
<li>比如 react 开发中，有 React Hot Loader，实时调整 react 组件（目前 React 官方已经弃用了，改成使用 react-refresh）；</li>
</ul>
</li>
</ul>
</li>
<li>接下来我们来演示一下 Vue 实现一下 HMR 功能。</li>
</ul>
<h4 id="HMR的原理"><a href="#HMR的原理" class="headerlink" title="HMR的原理"></a>HMR的原理</h4><ul>
<li>那么 HMR 的原理是什么呢？如何可以做到只更新一个模块中的内容呢？<ul>
<li>webpack-dev-server 会创建两个服务：提供静态资源的服务（express）和 Socket 服务（net.Socket）；</li>
<li>express server 负责直接提供静态资源的服务（打包后的资源直接被浏览器请求和解析）；</li>
</ul>
</li>
<li>HMR Socket Server，是一个 socket 的长连接：<ul>
<li>长连接有一个最好的好处是建立连接后双方可以通信（服务器可以直接发送文件到客户端）；</li>
<li>当服务器监听到对应的模块发生变化时，会生成两个文件 .json（manifest文件）和 .js 文件（update chunk）；</li>
<li>通过长连接，可以直接将这两个文件主动发送给客户端（浏览器）；</li>
<li>浏览器拿到两个新的文件后，通过 HMR runtime 机制，加载这两个文件，并且针对修改的模块进行更新；</li>
</ul>
</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://s1.vika.cn/space/2024/01/28/c438030fd402416f811eec3e9878d431" alt="1663753369134"></p>
<h3 id="主机-端口号-压缩格式"><a href="#主机-端口号-压缩格式" class="headerlink" title="主机&#x2F;端口号&#x2F;压缩格式"></a>主机&#x2F;端口号&#x2F;压缩格式</h3><ul>
<li><p>host 设置主机地址：</p>
<ul>
<li>默认值是 localhost；</li>
<li>如果希望其他地方也可以访问，可以设置为 0.0.0.0；</li>
</ul>
</li>
<li><p>localhost 和 0.0.0.0 的区别：</p>
<ul>
<li>localhost：本质上是一个域名，通常情况下会被解析成 127.0.0.1</li>
<li>127.0.0.1：回环地址 (Loop Back Address)，表达的意思其实是我们主机自己发出去的包，直接被自己接收;<ul>
<li>正常的数据库包经常 应用层 - 传输层 - 网络层 - 数据链路层 - 物理层 ;</li>
<li>而回环地址，是在网络层直接就被获取到了，是不会经常数据链路层和物理层的;</li>
<li>比如我们监听 127.0.0.1时，在同一个网段下的主机中，通过ip地址是不能访问的</li>
</ul>
</li>
<li>0.0.0.0：监听IPV4上所有的地址，再根据端口找到不同的应用程序;<ul>
<li>比如我们监听 0.0.0.0时，在同一个网段下的主机中，通过ip地址是可以访问的;</li>
</ul>
</li>
</ul>
</li>
<li><p>port 设置监听的端口，默认情况下是 8080</p>
</li>
<li><p>open 是否打开浏览器：</p>
<ul>
<li>默认值是 false，设置为 true 会打开浏览器；</li>
<li>也可以设置为类似于 Google Chrome等值；</li>
</ul>
</li>
<li><p>compress 是否为静态文件开启 gzip compression：</p>
<ul>
<li>默认值是 false，可以设置为 true；</li>
</ul>
</li>
</ul>
<p><strong>webpack.config.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 本地服务</span></span><br><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">  <span class="comment">// contentBase: &#x27;./public&#x27;,</span></span><br><span class="line">  <span class="attr">hot</span>: <span class="literal">true</span>, <span class="comment">// 开启热替换</span></span><br><span class="line">  <span class="comment">// host: &#x27;0.0.0.0&#x27;, // 主机名</span></span><br><span class="line">  <span class="attr">port</span>: <span class="number">7777</span>, <span class="comment">// 端口号</span></span><br><span class="line">  <span class="attr">open</span>: <span class="literal">true</span>, <span class="comment">// 自动打开浏览器</span></span><br><span class="line">  <span class="attr">compress</span>: <span class="literal">true</span>, <span class="comment">// 开启 gzip 压缩</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h3><h4 id="Proxy代理"><a href="#Proxy代理" class="headerlink" title="Proxy代理"></a>Proxy代理</h4><ul>
<li>proxy 是我们开发中非常常用的一个配置选项，它的目的设置代理来解决跨域访问的问题：<ul>
<li>比如我们的一个 api 请求是 <a href="http://localhost:8888，但是本地启动服务器的域名是">http://localhost:8888，但是本地启动服务器的域名是</a> <a href="http://localhost:8000，这个时候发送网络请求就会出现跨域的问题；">http://localhost:8000，这个时候发送网络请求就会出现跨域的问题；</a></li>
<li>那么我们可以将请求先发送到一个代理服务器，代理服务器和 API 服务器没有跨域的问题，就可以解决我们的跨域问题了；</li>
</ul>
</li>
<li>我们可以进行如下的设置：<ul>
<li>ptarget：表示的是代理到的目标地址，比如  &#x2F;api-hy&#x2F;moment 会被代理到 <a target="_blank" rel="noopener" href="http://localhost:8888/api-hy/moment%EF%BC%9B">http://localhost:8888/api-hy/moment；</a></li>
<li>pathRewrite：默认情况下，我们的 &#x2F;api-hy 也会被写入到 URL 中，如果希望删除，可以使用 pathRewrite；</li>
<li>secure：默认情况下不接收转发到 https 的服务器上，如果希望支持，可以设置为 false；</li>
<li>changeOrigin：它表示是否更新代理后请求的 headers 中 host 地址；</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="changeOrigin的解析"><a href="#changeOrigin的解析" class="headerlink" title="changeOrigin的解析"></a>changeOrigin的解析</h4><ul>
<li>这个 changeOrigin 官方说的非常模糊，通过查看源码我发现其实是要修改代理请求中的headers中的host属性：<ul>
<li>因为我们真实的请求，其实是需要通过 <a href="http://localhost:8888来请求的；">http://localhost:8888来请求的；</a></li>
<li>但是因为使用了代码，默认情况下它的值时 <a href="http://localhost:8000；">http://localhost:8000；</a></li>
<li>如果我们需要修改，那么可以将 changeOrigin 设置为 true 即可；</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="historyApiFallback"><a href="#historyApiFallback" class="headerlink" title="historyApiFallback"></a>historyApiFallback</h4><ul>
<li>historyApiFallback 是开发中一个非常常见的属性，它主要的作用是解决 SPA 页面在路由跳转之后，进行页面刷新时，返回 404 的错误。</li>
<li>boolean值：默认是 false<ul>
<li>如果设置为 true，那么在刷新时，返回 404 错误时，会自动返回 index.html 的内容；</li>
</ul>
</li>
<li>object 类型的值，可以配置 rewrites 属性（了解）：<ul>
<li>可以配置 from 来匹配路径，决定要跳转到哪一个页面；</li>
</ul>
</li>
<li>事实上 devServer 中实现 historyApiFallback 功能是通过 connect-history-api-fallback 库的：<ul>
<li>可以查看 connect-history-api-fallback 文档</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="resolve模块"><a href="#resolve模块" class="headerlink" title="resolve模块"></a>resolve模块</h2><h3 id="resolve模块解析"><a href="#resolve模块解析" class="headerlink" title="resolve模块解析"></a>resolve模块解析</h3><ul>
<li><p>resolve用于设置模块如何被解析：</p>
<ul>
<li>在开发中我们会有各种各样的模块依赖，这些模块可能来自于自己编写的代码，也可能来自第三方库；</li>
<li>resolve可以帮助webpack从每个 require&#x2F;import 语句中，找到需要引入到合适的模块代码；</li>
<li>webpack 使用 enhanced-resolve 来解析文件路径；</li>
</ul>
</li>
<li><p>webpack能解析三种文件路径：</p>
</li>
<li><p>绝对路径</p>
<ul>
<li>由于已经获得文件的绝对路径，因此不需要再做进一步解析。</li>
</ul>
</li>
<li><p>相对路径</p>
<ul>
<li>在这种情况下，使用 import 或 require 的资源文件所处的目录，被认为是上下文目录；</li>
<li>在 import&#x2F;require 中给定的相对路径，会拼接此上下文路径，来生成模块的绝对路径；</li>
</ul>
</li>
<li><p>模块路径</p>
<ul>
<li>在 resolve.modules 中指定的所有目录检索模块；<ul>
<li>默认值是 [‘node_modules’]，所以默认会从 node_modules 中查找文件；</li>
</ul>
</li>
<li>我们可以通过设置别名的方式来替换初识模块路径，具体后面讲解 alias 的配置；</li>
</ul>
</li>
<li><p>如果是一个文件：</p>
<ul>
<li>如果文件具有扩展名，则直接打包文件；</li>
<li>否则，将使用 resolve.extensions 选项作为文件扩展名解析；</li>
</ul>
</li>
<li><p>如果是一个文件夹：</p>
<ul>
<li>会在文件夹中根据 resolve.mainFiles 配置选项中指定的文件顺序查找；<ul>
<li>resolve.mainFiles 的默认值是 [‘index’]；</li>
<li>再根据 resolve.extensions 来解析扩展名；</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="extensions和alias配置"><a href="#extensions和alias配置" class="headerlink" title="extensions和alias配置"></a>extensions和alias配置</h3><ul>
<li>extensions 是解析到文件时自动添加扩展名：<ul>
<li>默认值是 [‘.wasm’, ‘.mjs’, ‘.js’, ‘.json’]；</li>
<li>所以如果我们代码中想要添加加载  .vue 或者 jsx 或者 ts 等文件时，我们必须自己写上扩展名；</li>
</ul>
</li>
<li>另一个非常好用的功能是配置别名 alias：<ul>
<li>特别是当我们项目的目录结构比较深的时候，或者一个文件的路径可能需要 ..&#x2F;..&#x2F;..&#x2F;这种路径片段；</li>
<li>我们可以给某些常见的路径起一个别名；</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">resolve</span>: &#123;</span><br><span class="line">  <span class="attr">extensions</span>: [<span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;.json&#x27;</span>, <span class="string">&#x27;.mjs&#x27;</span>, <span class="string">&#x27;.vue&#x27;</span>],</span><br><span class="line">  <span class="attr">alias</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;@&#x27;</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./src&#x27;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="开发与生产环境的分离"><a href="#开发与生产环境的分离" class="headerlink" title="开发与生产环境的分离"></a>开发与生产环境的分离</h2><h3 id="区分开发环境"><a href="#区分开发环境" class="headerlink" title="区分开发环境"></a>区分开发环境</h3><ul>
<li>目前我们所有的 webpack 配置信息都是放到一个配置文件中的：webpack.config.js<ul>
<li>当配置越来越多时，这个文件会变得越来越不容易维护；</li>
<li>并且某些配置是在开发环境需要使用的，某些配置是在生成环境需要使用的，当然某些配置是在开发和生成环境都会使用的；</li>
<li>所以，我们最好对配置进行划分，方便我们维护和管理；</li>
</ul>
</li>
<li>那么，在启动时如何可以区分不同的配置呢？<ul>
<li>方案一：编写两个不同的配置文件，开发和生成时，分别加载不同的配置文件即可；</li>
<li>方式二：使用相同的一个入口配置文件，通过设置参数来区分它们；</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="入口文件解析"><a href="#入口文件解析" class="headerlink" title="入口文件解析"></a>入口文件解析</h3><ul>
<li>我们之前编写入口文件的规则是这样的：.&#x2F;src&#x2F;index.js，但是如果我们的配置文件所在的位置变成了 config 目录，我们是否应该变成 ..&#x2F;src&#x2F;index.js呢？<ul>
<li>如果我们这样编写，会发现是报错的，依然要写成 .&#x2F;src&#x2F;index.js；</li>
<li>这是因为入口文件其实是和另一个属性时有关的 context；</li>
</ul>
</li>
<li>context 的作用是用于解析入口（entry point）和加载器（loader）：<ul>
<li>官方说法：默认是当前路径（但是经过我测试，默认应该是webpack的启动目录）</li>
<li>另外推荐在配置中传入一个值；</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="开发与生产环境的分离-1"><a href="#开发与生产环境的分离-1" class="headerlink" title="开发与生产环境的分离"></a>开发与生产环境的分离</h3><ul>
<li>安装插件: <strong>npm install webpack-merge -D</strong> , 用于合并 webpack 配置</li>
</ul>
<p><strong>webpack.comm.config.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>) <span class="comment">// 导入node的内置path模块</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">DefinePlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">VueLoaderPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;vue-loader/dist/index&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// web 环境</span></span><br><span class="line">  <span class="attr">target</span>: <span class="string">&#x27;web&#x27;</span>,</span><br><span class="line">  <span class="comment">// 打包入口</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">  <span class="comment">// 打包出口</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;../dist&#x27;</span>), <span class="comment">// 出口目录</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;js/bundle.js&#x27;</span>, <span class="comment">// 出口文件名</span></span><br><span class="line">    <span class="attr">assetModuleFilename</span>: <span class="string">&#x27;img/[name]_[hash:6].[ext]&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">extensions</span>: [<span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;.json&#x27;</span>, <span class="string">&#x27;.mjs&#x27;</span>, <span class="string">&#x27;.vue&#x27;</span>],</span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;@&#x27;</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;../src&#x27;</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 模块</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">//匹配处理 .CSS 文件</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;postcss-loader&#x27;</span>,</span><br><span class="line">          <span class="comment">// &#123;</span></span><br><span class="line">          <span class="comment">//   loader: &#x27;postcss-loader&#x27;,</span></span><br><span class="line">          <span class="comment">//   options: &#123;</span></span><br><span class="line">          <span class="comment">//     postcssOptions: &#123;</span></span><br><span class="line">          <span class="comment">//       plugins: [require(&#x27;autoprefixer&#x27;)],</span></span><br><span class="line">          <span class="comment">//     &#125;,</span></span><br><span class="line">          <span class="comment">//   &#125;,</span></span><br><span class="line">          <span class="comment">// &#125;,</span></span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//匹配处理 .less 文件</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;less-loader&#x27;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//匹配图片资源</span></span><br><span class="line">      <span class="comment">// &#123;</span></span><br><span class="line">      <span class="comment">//   test: /\.(jpg|jpeg|gif|png|svg)$/,</span></span><br><span class="line">      <span class="comment">//   use: [</span></span><br><span class="line">      <span class="comment">//     &#123;</span></span><br><span class="line">      <span class="comment">//       loader: &#x27;url-loader&#x27;,</span></span><br><span class="line">      <span class="comment">//       options: &#123;</span></span><br><span class="line">      <span class="comment">//         esModule: false,</span></span><br><span class="line">      <span class="comment">//         // outputPath: &#x27;img&#x27;,//指定将图片打包到输出到 dist 中的 img 文件夹,也可以直接写到 name 属性中</span></span><br><span class="line">      <span class="comment">//         name: &#x27;img/[name]_[hash:6].[ext]&#x27;, // 指定输出的文件名为原文件名,6位hash值以及原文件的扩展名</span></span><br><span class="line">      <span class="comment">//         limit: 100 * 1024, // 小于 100k 的文件会打包压缩到出口文件 bundle.js 中,大于的直接打包不压缩</span></span><br><span class="line">      <span class="comment">//       &#125;,</span></span><br><span class="line">      <span class="comment">//     &#125;,</span></span><br><span class="line">      <span class="comment">//   ],</span></span><br><span class="line">      <span class="comment">//   type: &#x27;javascript/auto&#x27;,</span></span><br><span class="line">      <span class="comment">// &#125;,</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//匹配图片资源</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(jpg|jpeg|gif|png|svg)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;asset&#x27;</span>,</span><br><span class="line">        <span class="comment">// generator: &#123;</span></span><br><span class="line">        <span class="comment">//   filename: &#x27;img/[name]_[hash:6].[ext]&#x27;,</span></span><br><span class="line">        <span class="comment">// &#125;,</span></span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">100</span> * <span class="number">1024</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="comment">//匹配字体资源</span></span><br><span class="line">      <span class="comment">// &#123;</span></span><br><span class="line">      <span class="comment">//   test: /\.(eot|ttf|woff2?)$/,</span></span><br><span class="line">      <span class="comment">//   use: &#123;</span></span><br><span class="line">      <span class="comment">//     loader: &quot;file-loader&quot;,</span></span><br><span class="line">      <span class="comment">//     options: &#123;</span></span><br><span class="line">      <span class="comment">//       name:&quot;font/[name]_[hash:6].[ext]&quot;</span></span><br><span class="line">      <span class="comment">//     &#125;</span></span><br><span class="line">      <span class="comment">//   &#125;</span></span><br><span class="line">      <span class="comment">// &#125;</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(eot|ttf|woff2?)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;asset/resource&#x27;</span>,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&#x27;font/[name]_[hash:6].[ext]&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 匹配 .js 文件</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 匹配 .vue 文件</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.vue$/</span>,</span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&#x27;vue-loader&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">template</span>: <span class="string">&#x27;./public/index.html&#x27;</span>,</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;hahaha~&#x27;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">DefinePlugin</span>(&#123;</span><br><span class="line">      <span class="attr">BASE_URL</span>: <span class="string">&quot;&#x27;./&#x27;&quot;</span>,</span><br><span class="line">      <span class="attr">__VUE_OPTIONS_API__</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">__VUE_PROD_DEVTOOLS__</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">VueLoaderPlugin</span>(),</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>webpack.dev.config.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; merge &#125; = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> commonConfig = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.comm.config&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">merge</span>(commonConfig, &#123;</span><br><span class="line">  <span class="comment">// 模式  development,开发阶段使用 | production,生产上线阶段使用</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">  <span class="comment">// source-map  建立js映射文件,方便调试代码和错误</span></span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&#x27;source-map&#x27;</span>,</span><br><span class="line">  <span class="comment">// 本地服务</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="comment">// contentBase: &#x27;./public&#x27;,</span></span><br><span class="line">    <span class="attr">hot</span>: <span class="literal">true</span>, <span class="comment">// 开启热替换</span></span><br><span class="line">    <span class="comment">// host: &#x27;0.0.0.0&#x27;, // 主机名</span></span><br><span class="line">    <span class="attr">port</span>: <span class="number">7777</span>, <span class="comment">// 端口号</span></span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>, <span class="comment">// 自动打开浏览器</span></span><br><span class="line">    <span class="attr">compress</span>: <span class="literal">true</span>, <span class="comment">// 开启 gzip 压缩</span></span><br><span class="line">    <span class="comment">// proxy: &#123;</span></span><br><span class="line">    <span class="comment">//   &#x27;/api&#x27;: &#123;</span></span><br><span class="line">    <span class="comment">//     target: &#x27;http://39.28.123.211:6666&#x27;, //远程服务器的地址,写到端口号即可,发请求时填本地服务器地址,完整url地址</span></span><br><span class="line">    <span class="comment">//     pathRewrite: &#123;</span></span><br><span class="line">    <span class="comment">//       &#x27;^/api&#x27;: &#x27;&#x27;,</span></span><br><span class="line">    <span class="comment">//     &#125;,</span></span><br><span class="line">    <span class="comment">//     secure: false,</span></span><br><span class="line">    <span class="comment">//     changeOrigin: true,</span></span><br><span class="line">    <span class="comment">//   &#125;,</span></span><br><span class="line">    <span class="comment">// &#125;,</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>webpack.prod.config.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">CleanWebpackPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CopyWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;copy-webpack-plugin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; merge &#125; = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> commonConfig = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.comm.config&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">merge</span>(commonConfig, &#123;</span><br><span class="line">  <span class="comment">// 模式  development,开发阶段使用 | production,生产上线阶段使用</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;production&#x27;</span>,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">CleanWebpackPlugin</span>(),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">CopyWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">patterns</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">from</span>: <span class="string">&#x27;./public&#x27;</span>,</span><br><span class="line">          <span class="attr">to</span>: <span class="string">&#x27;./&#x27;</span>,</span><br><span class="line">          <span class="attr">globOptions</span>: &#123;</span><br><span class="line">            <span class="attr">ignore</span>: [<span class="string">&#x27;**/index.html&#x27;</span>],</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author_group"><a class="post-copyright__author_img" href="/about/"><img class="post-copyright__author_img_front" src= "/img/loading.gif" data-lazy-src="https://bu.dusays.com/2023/11/08/654af68b25bb8.jpg"></a><div class="post-copyright__author_name">蜗牛浪迹天涯</div><div class="post-copyright__author_desc">宁静致远，热爱生活。</div></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div id="quit-box" onclick="RemoveRewardMask()"></div><div class="post-reward" onclick="AddRewardMask()"><div class="reward-button" title="赞赏作者"><i class="scoicon sco-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><ul class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a target="_blank" rel="noopener" href="https://bu.dusays.com/2023/11/07/6549e79364fa3.png"><img class="post-qr-code-img" src= "/img/loading.gif" data-lazy-src="https://bu.dusays.com/2023/11/07/6549e79364fa3.png" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://bu.dusays.com/2023/11/07/6549e79d02bd6.png" target="_blank"><img class="post-qr-code-img" src= "/img/loading.gif" data-lazy-src="https://bu.dusays.com/2023/11/07/6549e79d02bd6.png" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></ul></div></div><script>function RemoveRewardMask() {
    let rewardMainElements = document.querySelectorAll(".reward-main");
    let quitBoxElement = document.querySelector("#quit-box");

    console.log("RemoveRewardMask")

    rewardMainElements.forEach(element => {
        element.style.display = "none";
    });

    if (quitBoxElement) {
        quitBoxElement.style.display = "none";
    }
}

function AddRewardMask() {
    let rewardMainElements = document.querySelectorAll(".reward-main");
    let quitBoxElement = document.querySelector("#quit-box");

    console.log("AddRewardMask")

    rewardMainElements.forEach(element => {
        element.style.display = "flex";
    });

    if (quitBoxElement) {
        quitBoxElement.style.display = "flex";
    }
}</script></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本文是原创文章，采用<a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a>协议，完整转载请注明来自<a href="/">蜗牛浪迹天涯</a></span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__tag-list"></div></div></div><nav class="needEndHide pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/01/25/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/001_%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80/01_%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80_%E5%88%86%E7%B1%BB_%E6%A8%A1%E5%9E%8B_%E6%B5%81%E7%A8%8B_%E7%94%A8%E4%BE%8B_bug%E7%AE%A1%E7%90%86/"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">软件测试基础</div></div></a></div><div class="next-post pull-right"><a href="/2024/01/24/Web%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/401_TypeScript/40101_TypeScript/"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">TypeScript</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><div class="author-info__top-group"><div class="author-info__sayhi" id="author-info__sayhi" onclick="sco.changeSayHelloText()">一日之计在于晨</div></div></div><div class="avatar-img-group"><img class="avatar-img" alt="头像" src= "/img/loading.gif" data-lazy-src="https://bu.dusays.com/2023/11/08/654af68b25bb8.jpg"><div class="avatar-sticker"><img class="avatar-sticker-img" src= "/img/loading.gif" data-lazy-src="https://bu.dusays.com/2023/12/30/659011053e246.png" alt="心情贴纸"></div></div><div class="author-info__description_group"><div class="author-info__description">分享自己对编程的<b>热爱</b>，对美好生活的<b>向往</b>，对知识海洋<b>探索历程</b>。</div><div class="author-info__description2">相信你可以在这里找到对你有用的知识和教程。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/about"><div class="author-info__name">snail289</div><div class="author-info__desc">宁静致远，热爱生活。</div></a><div class="card-info-social-icons is-center"><a class="social-icon" target="_blank" rel="noopener" href="https://github.com/DuoSco/Hexo-Theme-slitude" title="Github"><i class="scoicon sco-github-line"></i></a><a class="social-icon" target="_blank" rel="noopener" href="https://space.bilibili.com/1329819902" title="Bilibili"><i class="scoicon sco-bilibili-line"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="scoicon sco-menu-line"></i><span>文章目录</span></div><div class="toc-content" id="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Webpack%E5%88%9D%E8%AF%86"><span class="toc-text">Webpack初识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A4%E8%AF%86Webpack"><span class="toc-text">认识Webpack</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E6%A1%86%E6%9E%B6%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6"><span class="toc-text">常见框架的脚手架</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Webpack%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">Webpack的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%89%93%E5%8C%85%E5%86%85%E5%AE%B9"><span class="toc-text">Vue项目的打包内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webpack%E7%9A%84%E4%BD%BF%E7%94%A8%E5%89%8D%E6%8F%90"><span class="toc-text">webpack的使用前提</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webpack%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-text">webpack的安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Webpack%E7%9A%84%E9%BB%98%E8%AE%A4%E6%89%93%E5%8C%85"><span class="toc-text">Webpack的默认打包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Webpack%E7%9A%84%E9%BB%98%E8%AE%A4%E6%89%93%E5%8C%85-1"><span class="toc-text">Webpack的默认打包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%B1%80%E9%83%A8Webpack"><span class="toc-text">创建局部Webpack</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Webpack%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">Webpack的配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">指定配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Webpack%E7%9A%84%E4%BE%9D%E8%B5%96%E5%9B%BE"><span class="toc-text">Webpack的依赖图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webpack%E6%89%93%E5%8C%85%E6%A1%88%E4%BE%8B"><span class="toc-text">webpack打包案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CSS%E4%B8%8ELess%E7%9A%84%E6%89%93%E5%8C%85"><span class="toc-text">CSS与Less的打包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CSS-loader"><span class="toc-text">CSS-loader</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85css-loader"><span class="toc-text">安装css-loader</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEcss-loader"><span class="toc-text">配置css-loader</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#style-loader"><span class="toc-text">style-loader</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85style-loader"><span class="toc-text">安装style-loader</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEstyle-loader"><span class="toc-text">配置style-loader</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#less-loader"><span class="toc-text">less-loader</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%84%E7%90%86less%E5%B7%A5%E5%85%B7"><span class="toc-text">处理less工具</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8less-loader"><span class="toc-text">使用less-loader</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#postcss-loader"><span class="toc-text">postcss-loader</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%A4%E8%AF%86postCSS%E5%B7%A5%E5%85%B7"><span class="toc-text">认识postCSS工具</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8postCSS"><span class="toc-text">使用postCSS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6autoprefixer"><span class="toc-text">插件autoprefixer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#postcss-loader-1"><span class="toc-text">postcss-loader</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E7%8B%AC%E7%9A%84postcss%E9%85%8D%E7%BD%AE"><span class="toc-text">单独的postcss配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#postcss-preset-env"><span class="toc-text">postcss-preset-env</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Webpack%E6%89%93%E5%8C%85%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90"><span class="toc-text">Webpack打包静态资源</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%93%E5%8C%85%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90"><span class="toc-text">打包图片资源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#file-loader"><span class="toc-text">file-loader</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#file-loader%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">file-loader的作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#file-loader%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-text">file-loader的安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#file-loader%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-text">file-loader的配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%9A%84%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99"><span class="toc-text">文件的命名规则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E5%90%8D%E7%A7%B0"><span class="toc-text">设置文件的名称</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%9A%84%E5%AD%98%E6%94%BE%E8%B7%AF%E5%BE%84"><span class="toc-text">文件的存放路径</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#url-loader"><span class="toc-text">url-loader</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#url-loader%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-text">url-loader的安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#url-loader%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-text">url-loader的配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#url-loader%E7%9A%84limit"><span class="toc-text">url-loader的limit</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#asset-module-type"><span class="toc-text">asset module type</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%A4%E8%AF%86-asset-module-type"><span class="toc-text">认识 asset module type</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8asset-module-type"><span class="toc-text">使用asset module type</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#limit"><span class="toc-text">limit</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%93%E5%8C%85%E5%AD%97%E4%BD%93%E6%96%87%E4%BB%B6"><span class="toc-text">打包字体文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD%E5%AD%97%E4%BD%93%E6%96%87%E4%BB%B6"><span class="toc-text">加载字体文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E4%BD%93%E6%96%87%E4%BB%B6%E7%9A%84%E6%89%93%E5%8C%85"><span class="toc-text">字体文件的打包</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Plugin"><span class="toc-text">Plugin</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A4%E8%AF%86Plugin"><span class="toc-text">认识Plugin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CleanWebpackPlugin"><span class="toc-text">CleanWebpackPlugin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HtmlWebpackPlugin"><span class="toc-text">HtmlWebpackPlugin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89HTML%E6%A8%A1%E6%9D%BF"><span class="toc-text">自定义HTML模板</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89HTML%E6%A8%A1%E6%9D%BF-1"><span class="toc-text">自定义HTML模板</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DefinePlugin%E7%9A%84%E4%BB%8B%E7%BB%8D"><span class="toc-text">DefinePlugin的介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DefinePlugin%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">DefinePlugin的使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CopyWebpackPlugin"><span class="toc-text">CopyWebpackPlugin</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mode%E4%B8%8Esource-map"><span class="toc-text">Mode与source-map</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Mode"><span class="toc-text">Mode</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#source-map"><span class="toc-text">source-map</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#babel"><span class="toc-text">babel</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#babel%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">babel的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Babel%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BD%BF%E7%94%A8"><span class="toc-text">Babel命令行使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">插件的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Babel%E7%9A%84%E9%A2%84%E8%AE%BEpreset"><span class="toc-text">Babel的预设preset</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Babel%E7%9A%84%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86"><span class="toc-text">Babel的底层原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Babel%E7%9A%84%E7%BC%96%E8%AF%91%E6%B5%81%E7%A8%8B"><span class="toc-text">Babel的编译流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Babel-loader"><span class="toc-text">Babel-loader</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#babel-preset"><span class="toc-text">babel-preset</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Babel%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">Babel的配置文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9Vue%E6%96%87%E4%BB%B6%E7%9A%84%E6%89%93%E5%8C%85"><span class="toc-text">对Vue文件的打包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9-vue-%E4%BB%A3%E7%A0%81%E7%9A%84%E6%89%93%E5%8C%85"><span class="toc-text">对 vue 代码的打包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9-vue-%E4%B8%8D%E5%90%8C%E7%89%88%E6%9C%AC%E7%9A%84%E8%A7%A3%E6%9E%90"><span class="toc-text">对 vue 不同版本的解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9-template-%E6%A8%A1%E6%9D%BF%E7%9A%84%E8%A7%A3%E6%9E%90"><span class="toc-text">对 template 模板的解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9vue%E5%8D%95%E6%96%87%E4%BB%B6%E7%BB%84%E4%BB%B6%E7%9A%84%E6%89%93%E5%8C%85"><span class="toc-text">对vue单文件组件的打包</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0%E6%9C%8D%E5%8A%A1"><span class="toc-text">搭建本地服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-text">搭建本地服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E6%97%B6%E8%87%AA%E5%8A%A8%E7%BC%96%E8%AF%91"><span class="toc-text">实时自动编译</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E6%97%B6%E5%88%B7%E6%96%B0%E9%A1%B5%E9%9D%A2"><span class="toc-text">实时刷新页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%83%AD%E6%9B%BF%E6%8D%A2HMR"><span class="toc-text">热替换HMR</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%A4%E8%AF%86HMR"><span class="toc-text">认识HMR</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%90%AFHMR"><span class="toc-text">开启HMR</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%86%E6%9E%B6%E7%9A%84HMR"><span class="toc-text">框架的HMR</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HMR%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-text">HMR的原理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E6%9C%BA-%E7%AB%AF%E5%8F%A3%E5%8F%B7-%E5%8E%8B%E7%BC%A9%E6%A0%BC%E5%BC%8F"><span class="toc-text">主机&#x2F;端口号&#x2F;压缩格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Proxy"><span class="toc-text">Proxy</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Proxy%E4%BB%A3%E7%90%86"><span class="toc-text">Proxy代理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#changeOrigin%E7%9A%84%E8%A7%A3%E6%9E%90"><span class="toc-text">changeOrigin的解析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#historyApiFallback"><span class="toc-text">historyApiFallback</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#resolve%E6%A8%A1%E5%9D%97"><span class="toc-text">resolve模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#resolve%E6%A8%A1%E5%9D%97%E8%A7%A3%E6%9E%90"><span class="toc-text">resolve模块解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#extensions%E5%92%8Calias%E9%85%8D%E7%BD%AE"><span class="toc-text">extensions和alias配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E4%B8%8E%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%86%E7%A6%BB"><span class="toc-text">开发与生产环境的分离</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%BA%E5%88%86%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="toc-text">区分开发环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90"><span class="toc-text">入口文件解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E4%B8%8E%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%86%E7%A6%BB-1"><span class="toc-text">开发与生产环境的分离</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="scoicon sco-map-line"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/02/15/Python/%E9%BB%91%E9%A9%ACPython_01/" title="Python基础-01"><img alt="Python基础-01" src= "/img/loading.gif" data-lazy-src="https://tse2-mm.cn.bing.net/th/id/OIP-C.fs21LLVsDhIQJeG3UilvswHaEK?w=306&amp;h=180&amp;c=7&amp;r=0&amp;o=5&amp;pid=1.7"></a><div class="content"><a class="title" href="/2024/02/15/Python/%E9%BB%91%E9%A9%ACPython_01/" title="Python基础-01">Python基础-01</a><a class="article-recent_post_categories" href="/2024/02/15/Python/%E9%BB%91%E9%A9%ACPython_01/">Python</a></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/02/15/Python/%E9%BB%91%E9%A9%ACPython_02/" title="Python基础-02"><img alt="Python基础-02" src= "/img/loading.gif" data-lazy-src="https://tse2-mm.cn.bing.net/th/id/OIP-C.fs21LLVsDhIQJeG3UilvswHaEK?w=306&amp;h=180&amp;c=7&amp;r=0&amp;o=5&amp;pid=1.7"></a><div class="content"><a class="title" href="/2024/02/15/Python/%E9%BB%91%E9%A9%ACPython_02/" title="Python基础-02">Python基础-02</a><a class="article-recent_post_categories" href="/2024/02/15/Python/%E9%BB%91%E9%A9%ACPython_02/">Python</a></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/02/15/Python/%E9%BB%91%E9%A9%ACPython_03/" title="Python基础-03"><img alt="Python基础-03" src= "/img/loading.gif" data-lazy-src="https://tse2-mm.cn.bing.net/th/id/OIP-C.fs21LLVsDhIQJeG3UilvswHaEK?w=306&amp;h=180&amp;c=7&amp;r=0&amp;o=5&amp;pid=1.7"></a><div class="content"><a class="title" href="/2024/02/15/Python/%E9%BB%91%E9%A9%ACPython_03/" title="Python基础-03">Python基础-03</a><a class="article-recent_post_categories" href="/2024/02/15/Python/%E9%BB%91%E9%A9%ACPython_03/">Python</a></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/26/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/007_UI%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/001_UI%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/" title="UI自动化测试"><img alt="UI自动化测试" src= "/img/loading.gif" data-lazy-src="https://tse3-mm.cn.bing.net/th/id/OIP-C.FjupsUlF0U4eTb-7NSK7VQHaEK?w=324&amp;h=182&amp;c=7&amp;r=0&amp;o=5&amp;pid=1.7"></a><div class="content"><a class="title" href="/2024/01/26/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/007_UI%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/001_UI%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/" title="UI自动化测试">UI自动化测试</a><a class="article-recent_post_categories" href="/2024/01/26/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/007_UI%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/001_UI%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/">软件测试</a></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/26/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/006_%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/11_%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95-02/" title="性能测试基础02"><img alt="性能测试基础02" src= "/img/loading.gif" data-lazy-src="https://tse1-mm.cn.bing.net/th/id/OIP-C.n0oCh3l8SwuNaJd7YTGnbAHaEo?w=254&amp;h=180&amp;c=7&amp;r=0&amp;o=5&amp;pid=1.7"></a><div class="content"><a class="title" href="/2024/01/26/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/006_%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/11_%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95-02/" title="性能测试基础02">性能测试基础02</a><a class="article-recent_post_categories" href="/2024/01/26/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/006_%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/11_%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95-02/">软件测试</a></div></div></div></div></div></div></main><footer id="footer"><div id="sco-footer-bar"><div class="footer-logo"><span class="scoicon">首页</span></div><div class="footer-bar-description">来自蜗牛浪迹天涯 - 宁静致远，热爱生活。的文章</div><a class="footer-bar-link" href="/">了解更多</a></div><div id="footer_deal"><a class="deal_link" target="_blank" rel="noopener" href="https://github.com" title="Github"><i class="scoicon sco-bilibili-line"></i></a><a class="deal_link" href="mailto:1448623289@qq.com" title="Mail"><i class="scoicon sco-mail-line"></i></a><div class="footer_mini_logo" id="footer_mini_logo" title="返回顶部" onclick="sco.toTop()"><img src= "/img/loading.gif" data-lazy-src="https://bu.dusays.com/2023/11/08/654af68b25bb8.jpg" alt="返回顶部"></div><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com" title="Bilibili"><i class="scoicon sco-bilibili-line"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://v.douyin.com" title="抖音"><i class="scoicon sco-douyin-fill"></i></a></div><div id="sco-footer"><div class="footer-group"><h3 class="footer-title">导航</h3><div class="footer-links"><a class="footer-item" href="/archives/" title="归档">归档</a><a class="footer-item" href="/categories/" title="分类">分类</a><a class="footer-item" href="/tags/" title="标签">标签</a></div></div><div class="footer-group"><h3 class="footer-title">服务</h3><div class="footer-links"><a class="footer-item" target="_blank" rel="noopener" href="https://aliyun.com/" title="阿里云">阿里云</a><a class="footer-item" target="_blank" rel="noopener" href="https://v6.51.la/" title="51la统计">51la统计</a><a class="footer-item" target="_blank" rel="noopener" href="https://tongji.baidu.com/" title="百度统计">百度统计</a></div></div><div class="footer-group"><h3 class="footer-title">支持</h3><div class="footer-links"><a class="footer-item" href="/about/" title="打赏记录">打赏记录</a><a class="footer-item" target="_blank" rel="noopener" href="https://docs.wzsco.top/" title="文档">文档</a><a class="footer-item" target="_blank" rel="noopener" href="https://blog.wzsco.top/" title="案例">案例</a></div></div><div class="footer-group"><h3 class="footer-title">协议</h3><div class="footer-links"><a class="footer-item" href="/cookies/" title="Cookies">Cookies</a><a class="footer-item" href="/privacy/" title="用户协议">用户协议</a><a class="footer-item" href="/copyright/" title="版权协议">版权协议</a></div></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div class="copyright">© 2024 By&nbsp;<a class="footer-bar-link" href="/">snail289</a></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/DuoSco/hexo-theme-solitude">主题</a><a class="footer-bar-link cc" href="/copyright/"><i class="scoicon sco-copyright-line"></i><i class="scoicon sco-creative-commons-by-line"></i><i class="scoicon sco-creative-commons-nc-line"></i><i class="scoicon sco-creative-commons-nd-line"></i></a></div></div></div><div class="needEndHide" id="cookies-window"><div class="cookies-window-title">协议提醒助手</div><div class="cookies-window-content"><span class="cookies-tip">查看本站为你的个人隐私做出的努力</span><a class="cookies-link" href="/privacy/" title="本站如何保护你的隐私"><i class="scoicon sco-right-btn-fill"></i></a></div></div></footer></div><!-- inject body--><script src="https://cdn.bootcdn.net/ajax/libs/pjax/0.2.8/pjax.min.js"></script><script src="/lib/lazyload.min.js"></script><script src="/lib/snackbar.min.js"></script><script src="/lib/view-image.min.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/Swiper/9.2.4/swiper-bundle.min.js"></script><div id="js-pjax"><script id="config-diff">var PAGE_CONFIG = {
    is_post: true,
    is_page: false,
    is_home: false,
    page: 'post',
    toc: true,
    comment: false,
}
</script></div><!-- post-ai)--><script src="https://cdn.bootcdn.net/ajax/libs/aplayer/1.10.1/APlayer.min.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/meting/2.0.1/Meting.min.js"></script><script>const meting_api = 'https://api.injahow.cn/meting/?server=:server&type=:type&id=:id&auth=:auth&r=:r';
</script><script>const coverColorConfig = {
    mode: 'local',
    api: 'https://img2color.meuicat.com/api?img=',
    time: 43200000,
}</script><script src="/lib/cover-color.min.js"></script><!-- waterfall--><script src="/lib/waterfall.min.js"></script><!-- pjax--><script>let pjaxSelectors = [
    'title',
    '#body-wrap',
    '#site-config',
    'meta[name="description"]',
    '#js-pjax',
    'meta[property^="og:"]',
]

const pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
})

document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
})

document.addEventListener('pjax:complete', () => {
    window.refreshFn()
})

document.addEventListener('pjax:error', (e) => {
    if (e.request.status === 404) {
        pjax.loadUrl('/404.html')
    }
})</script><!-- music--><script src="/js/music.js"></script><!-- inject custom body--><script>console.log("body")</script><!-- search--><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="scoicon sco-close-fill"></i></button></nav><div class="search-wrap"><div class="search-box"><input class="search-box-input" id="search-input" type="text" autocomplete="off" spellcheck="false" autocorrect="off" autocapitalize="off" placeholder="输入关键词快速查找"></div><div id="search-results"></div><div id="search-pagination"></div><div id="search-tips"></div></div></div><div id="search-mask"></div></div><script src="/js/extend/search/local-search.js"></script><!-- music--><div class="needEndHide" id="nav-music" onclick="sco.musicToggle()"><div id="nav-music-hoverTips">音乐已暂停</div><meting-js id="8927329843" server="netease" type="playlist" mutex="true" preload="none" data-lrctype="0" order="random" theme="var(--sco-main)"></meting-js></div></body></html><script>const posts=["2024/02/15/Python/黑马Python_01/","2024/02/15/Python/黑马Python_02/","2024/02/15/Python/黑马Python_03/","2024/01/26/软件测试/007_UI自动化测试/001_UI自动化测试/","2024/01/26/软件测试/006_性能测试/11_性能测试-02/","2024/01/26/软件测试/006_性能测试/11_性能测试-01/","2024/01/26/软件测试/005_接口测试/10_接口测试_接口对象封装_接口自动化测试框架_全量字段校验_持续集成/","2024/01/26/软件测试/005_接口测试/09_接口测试_Requests库_UnitTest框架_数据库操作_日志收集/","2024/01/26/软件测试/005_接口测试/08_接口测试_Postman的使用/","2024/01/26/软件测试/005_接口测试/接口测试_慕课网/","2024/01/26/软件测试/005_接口测试/接口自动化测试_慕课网/","2024/01/26/软件测试/005_接口测试/07_接口测试_接口测试基础/","2024/01/25/软件测试/003_MySQL/004_MySQL_运维篇/","2024/01/25/软件测试/003_MySQL/003_MySQL_进阶篇-02/","2024/01/25/软件测试/003_MySQL/002_MySQL_进阶篇-01/","2024/01/25/软件测试/003_MySQL/001_MySQL_基础篇/","2024/01/25/软件测试/002_Linux/001_Linux/","2024/01/25/软件测试/001_软件测试基础/功能测试项目实战_慕课网/","2024/01/25/软件测试/001_软件测试基础/01_软件测试基础_分类_模型_流程_用例_bug管理/","2024/01/24/Web前端开发/402_Webpack/40201_Webpack/","2024/01/24/Web前端开发/401_TypeScript/40101_TypeScript/","2024/01/23/Web前端开发/303_React/30305_React_Hooks解析/","2024/01/23/Web前端开发/303_React/30304_React_Router/","2024/01/23/Web前端开发/303_React/30303_Redux/","2024/01/23/Web前端开发/303_React/30302_React_过渡动画与CSS样式/","2024/01/23/Web前端开发/303_React/30301_React核心基础/","2024/01/23/Web前端开发/302_Vue3/30207_Vue3_Vue3原理/","2024/01/23/Web前端开发/302_Vue3/30206_Vue3_过渡与动画/","2024/01/23/Web前端开发/302_Vue3/30205_Vue3_自定义指令与插件/","2024/01/23/Web前端开发/302_Vue3/30204_Vue3_Pinia/","2024/01/23/Web前端开发/302_Vue3/30203_Vue3_VueX/","2024/01/23/Web前端开发/302_Vue3/30202_Vue3_Router/","2024/01/23/Web前端开发/302_Vue3/30201_Vue3_基础核心/","2024/01/23/Web前端开发/301_Vue2/30103_Vue2_VueX/","2024/01/23/Web前端开发/301_Vue2/30102_Vue2_VueRouter/","2024/01/23/Web前端开发/301_Vue2/30101_Vue2_Vue2Base/","2024/01/23/Web前端开发/206_模块化/20601_ModuleJS/","2024/01/22/Web前端开发/205_Git/20501_Git/","2024/01/21/Web前端开发/204_Fetch/20401_Fetch/","2024/01/20/Web前端开发/203_Axios/20301_Axios/","2024/01/19/Web前端开发/106_JavaScript高级/10509_JS代码的执行原理/","2024/01/19/Web前端开发/202_Promise/20201_Promise/","2024/01/18/Web前端开发/201_Ajax/20101_Ajax/","2024/01/18/Web前端开发/106_JavaScript高级/10508_浏览器执行过程原理/","2024/01/17/Web前端开发/106_JavaScript高级/10507_JS_ES6-ES13/","2024/01/16/Web前端开发/105_JavaScript/10506_JS_BOM/","2024/01/15/Web前端开发/105_JavaScript/10505_JS_DOM/","2024/01/14/Web前端开发/105_JavaScript/10504_JS_Function/","2024/01/13/Web前端开发/105_JavaScript/10503_JS_Object/","2024/01/12/Web前端开发/105_JavaScript/10502_JS_Array/","2024/01/11/Web前端开发/105_JavaScript/10501_JavaScript_Base/","2024/01/10/Web前端开发/104_Less/10401_Less/","2024/01/09/Web前端开发/103_移动端开发/10304_Flex/","2024/01/08/Web前端开发/103_移动端开发/10303_Rem/","2024/01/07/Web前端开发/103_移动端开发/10302_Percent/","2024/01/06/Web前端开发/103_移动端开发/10301_WebMobileBase/","2024/01/05/Web前端开发/102_HTML5_CSS3/10202_CSS3/","2024/01/04/Web前端开发/102_HTML5_CSS3/10201_HTML5/","2024/01/03/Web前端开发/101_HTML_CSS/10103_CSS/","2024/01/02/Web前端开发/101_HTML_CSS/10102_HTML/","2024/01/01/Web前端开发/101_HTML_CSS/10101_WebBase/"];function toRandomPost(){ pjax.loadUrl('/'+posts[Math.floor(Math.random()*posts.length)]); };</script>